{"ast":null,"code":"import \"core-js/modules/es.array.concat\";\nimport \"core-js/modules/es.object.keys\";\nimport \"core-js/modules/es.object.to-string\";\nimport \"core-js/modules/es.regexp.constructor\";\nimport \"core-js/modules/es.regexp.exec\";\nimport \"core-js/modules/es.regexp.to-string\";\nimport \"core-js/modules/es.string.replace\";\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\nimport Core from './../../core';\nimport { addClass, empty, fastInnerHTML, getScrollbarWidth, isChildOf, isInput, removeClass, getParentWindow } from './../../helpers/dom/element';\nimport { arrayEach, arrayFilter, arrayReduce } from './../../helpers/array';\nimport Cursor from './cursor';\nimport EventManager from './../../eventManager';\nimport { mixin, hasOwnProperty } from './../../helpers/object';\nimport { isUndefined, isDefined } from './../../helpers/mixed';\nimport { debounce, isFunction } from './../../helpers/function';\nimport { filterSeparators, hasSubMenu, isDisabled, isItemHidden, isSeparator, isSelectionDisabled, normalizeSelection } from './utils';\nimport { KEY_CODES } from './../../helpers/unicode';\nimport localHooks from './../../mixins/localHooks';\nimport { SEPARATOR, NO_ITEMS, predefinedItems } from './predefinedItems';\nimport { stopImmediatePropagation, isRightClick } from './../../helpers/dom/event';\nimport { isWindowsOS } from './../../helpers/browser';\nvar MIN_WIDTH = 215;\n/**\n * @class Menu\n * @plugin ContextMenu\n */\n\nvar Menu = /*#__PURE__*/\nfunction () {\n  function Menu(hotInstance, options) {\n    _classCallCheck(this, Menu);\n    this.hot = hotInstance;\n    this.options = options || {\n      parent: null,\n      name: null,\n      className: '',\n      keepInViewport: true,\n      standalone: false,\n      minWidth: MIN_WIDTH,\n      container: this.hot.rootDocument.documentElement\n    };\n    this.eventManager = new EventManager(this);\n    this.container = this.createContainer(this.options.name);\n    this.hotMenu = null;\n    this.hotSubMenus = {};\n    this.parentMenu = this.options.parent || null;\n    this.menuItems = null;\n    this.origOutsideClickDeselects = null;\n    this.keyEvent = false;\n    this.offset = {\n      above: 0,\n      below: 0,\n      left: 0,\n      right: 0\n    };\n    this._afterScrollCallback = null;\n    this.registerEvents();\n  }\n  /**\n   * Register event listeners.\n   *\n   * @private\n   */\n\n  _createClass(Menu, [{\n    key: \"registerEvents\",\n    value: function registerEvents() {\n      var _this = this;\n      var frame = this.hot.rootWindow;\n      while (frame) {\n        this.eventManager.addEventListener(frame.document, 'mousedown', function (event) {\n          return _this.onDocumentMouseDown(event);\n        });\n        frame = getParentWindow(frame);\n      }\n    }\n    /**\n     * Set array of objects which defines menu items.\n     *\n     * @param {Array} menuItems Menu items to display.\n     */\n  }, {\n    key: \"setMenuItems\",\n    value: function setMenuItems(menuItems) {\n      this.menuItems = menuItems;\n    }\n    /**\n     * Returns currently selected menu item. Returns `null` if no item was selected.\n     *\n     * @returns {Object|null}\n     */\n  }, {\n    key: \"getSelectedItem\",\n    value: function getSelectedItem() {\n      return this.hasSelectedItem() ? this.hotMenu.getSourceDataAtRow(this.hotMenu.getSelectedLast()[0]) : null;\n    }\n    /**\n     * Checks if the menu has selected (highlighted) any item from the menu list.\n     *\n     * @returns {Boolean}\n     */\n  }, {\n    key: \"hasSelectedItem\",\n    value: function hasSelectedItem() {\n      return Array.isArray(this.hotMenu.getSelectedLast());\n    }\n    /**\n     * Set offset menu position for specified area (`above`, `below`, `left` or `right`).\n     *\n     * @param {String} area Specified area name (`above`, `below`, `left` or `right`).\n     * @param {Number} offset Offset value.\n     */\n  }, {\n    key: \"setOffset\",\n    value: function setOffset(area) {\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      this.offset[area] = offset;\n    }\n    /**\n     * Check if menu is using as sub-menu.\n     *\n     * @returns {Boolean}\n     */\n  }, {\n    key: \"isSubMenu\",\n    value: function isSubMenu() {\n      return this.parentMenu !== null;\n    }\n    /**\n     * Open menu.\n     *\n     * @fires Hooks#beforeContextMenuShow\n     * @fires Hooks#afterContextMenuShow\n     */\n  }, {\n    key: \"open\",\n    value: function open() {\n      var _this2 = this;\n      this.runLocalHooks('beforeOpen');\n      this.container.removeAttribute('style');\n      this.container.style.display = 'block';\n      var delayedOpenSubMenu = debounce(function (row) {\n        return _this2.openSubMenu(row);\n      }, 300);\n      var minWidthOfMenu = this.options.minWidth || MIN_WIDTH;\n      var noItemsDefined = false;\n      var filteredItems = arrayFilter(this.menuItems, function (item) {\n        if (item.key === NO_ITEMS) {\n          noItemsDefined = true;\n        }\n        return isItemHidden(item, _this2.hot);\n      });\n      if (filteredItems.length < 1 && !noItemsDefined) {\n        filteredItems.push(predefinedItems()[NO_ITEMS]);\n      } else if (filteredItems.length === 0) {\n        return;\n      }\n      filteredItems = filterSeparators(filteredItems, SEPARATOR);\n      var shouldAutoCloseMenu = false;\n      var settings = {\n        data: filteredItems,\n        colHeaders: false,\n        autoColumnSize: true,\n        autoWrapRow: false,\n        modifyColWidth: function modifyColWidth(width) {\n          if (isDefined(width) && width < minWidthOfMenu) {\n            return minWidthOfMenu;\n          }\n          return width;\n        },\n        autoRowSize: false,\n        readOnly: true,\n        editor: false,\n        copyPaste: false,\n        columns: [{\n          data: 'name',\n          renderer: function renderer(hot, TD, row, col, prop, value) {\n            return _this2.menuItemRenderer(hot, TD, row, col, prop, value);\n          }\n        }],\n        renderAllRows: true,\n        fragmentSelection: false,\n        outsideClickDeselects: false,\n        disableVisualSelection: 'area',\n        beforeKeyDown: function beforeKeyDown(event) {\n          return _this2.onBeforeKeyDown(event);\n        },\n        afterOnCellMouseOver: function afterOnCellMouseOver(event, coords) {\n          if (_this2.isAllSubMenusClosed()) {\n            delayedOpenSubMenu(coords.row);\n          } else {\n            _this2.openSubMenu(coords.row);\n          }\n        },\n        rowHeights: function rowHeights(row) {\n          return filteredItems[row].name === SEPARATOR ? 1 : 23;\n        },\n        afterOnCellContextMenu: function afterOnCellContextMenu(event) {\n          event.preventDefault(); // On the Windows platform, the \"contextmenu\" is triggered after the \"mouseup\" so that's\n          // why the closing menu is here. (#6507#issuecomment-582392301).\n\n          if (isWindowsOS() && shouldAutoCloseMenu && _this2.hasSelectedItem()) {\n            _this2.close(true);\n          }\n        },\n        beforeOnCellMouseUp: function beforeOnCellMouseUp(event) {\n          if (_this2.hasSelectedItem()) {\n            shouldAutoCloseMenu = !_this2.isCommandPassive(_this2.getSelectedItem());\n            _this2.executeCommand(event);\n          }\n        },\n        afterOnCellMouseUp: function afterOnCellMouseUp(event) {\n          // If the code runs on the other platform than Windows, the \"mouseup\" is triggered\n          // after the \"contextmenu\". So then \"mouseup\" closes the menu. Otherwise, the closing\n          // menu responsibility is forwarded to \"afterOnCellContextMenu\" callback (#6507#issuecomment-582392301).\n          if ((!isWindowsOS() || !isRightClick(event)) && shouldAutoCloseMenu && _this2.hasSelectedItem()) {\n            _this2.close(true);\n          }\n        },\n        afterUnlisten: function afterUnlisten() {\n          // Restore menu focus, fix for `this.instance.unlisten();` call in the tableView.js@260 file.\n          // This prevents losing table responsiveness for keyboard events when filter select menu is closed (#6497).\n          if (!_this2.hasSelectedItem() && _this2.isOpened()) {\n            _this2.hotMenu.listen(false);\n          }\n        }\n      };\n      this.origOutsideClickDeselects = this.hot.getSettings().outsideClickDeselects;\n      this.hot.getSettings().outsideClickDeselects = false;\n      this.hotMenu = new Core(this.container, settings);\n      this.hotMenu.addHook('afterInit', function () {\n        return _this2.onAfterInit();\n      });\n      this.hotMenu.addHook('afterSelection', function () {\n        return _this2.onAfterSelection.apply(_this2, arguments);\n      });\n      this.hotMenu.init();\n      this.hotMenu.listen();\n      this.blockMainTableCallbacks();\n      this.runLocalHooks('afterOpen');\n    }\n    /**\n     * Close menu.\n     *\n     * @param {Boolean} [closeParent=false] if `true` try to close parent menu if exists.\n     */\n  }, {\n    key: \"close\",\n    value: function close() {\n      var closeParent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      if (!this.isOpened()) {\n        return;\n      }\n      if (closeParent && this.parentMenu) {\n        this.parentMenu.close();\n      } else {\n        this.closeAllSubMenus();\n        this.container.style.display = 'none';\n        this.releaseMainTableCallbacks();\n        this.hotMenu.destroy();\n        this.hotMenu = null;\n        this.hot.getSettings().outsideClickDeselects = this.origOutsideClickDeselects;\n        this.runLocalHooks('afterClose');\n        if (this.parentMenu) {\n          this.parentMenu.hotMenu.listen();\n        }\n      }\n    }\n    /**\n     * Open sub menu at the provided row index.\n     *\n     * @param {Number} row Row index.\n     * @returns {Menu|Boolean} Returns created menu or `false` if no one menu was created.\n     */\n  }, {\n    key: \"openSubMenu\",\n    value: function openSubMenu(row) {\n      if (!this.hotMenu) {\n        return false;\n      }\n      var cell = this.hotMenu.getCell(row, 0);\n      this.closeAllSubMenus();\n      if (!cell || !hasSubMenu(cell)) {\n        return false;\n      }\n      var dataItem = this.hotMenu.getSourceDataAtRow(row);\n      var subMenu = new Menu(this.hot, {\n        parent: this,\n        name: dataItem.name,\n        className: this.options.className,\n        keepInViewport: true,\n        container: this.options.container\n      });\n      subMenu.setMenuItems(dataItem.submenu.items);\n      subMenu.open();\n      subMenu.setPosition(cell.getBoundingClientRect());\n      this.hotSubMenus[dataItem.key] = subMenu;\n      return subMenu;\n    }\n    /**\n     * Close sub menu at row index.\n     *\n     * @param {Number} row Row index.\n     */\n  }, {\n    key: \"closeSubMenu\",\n    value: function closeSubMenu(row) {\n      var dataItem = this.hotMenu.getSourceDataAtRow(row);\n      var menus = this.hotSubMenus[dataItem.key];\n      if (menus) {\n        menus.destroy();\n        delete this.hotSubMenus[dataItem.key];\n      }\n    }\n    /**\n     * Close all opened sub menus.\n     */\n  }, {\n    key: \"closeAllSubMenus\",\n    value: function closeAllSubMenus() {\n      var _this3 = this;\n      arrayEach(this.hotMenu.getData(), function (value, row) {\n        return _this3.closeSubMenu(row);\n      });\n    }\n    /**\n     * Checks if all created and opened sub menus are closed.\n     *\n     * @returns {Boolean}\n     */\n  }, {\n    key: \"isAllSubMenusClosed\",\n    value: function isAllSubMenusClosed() {\n      return Object.keys(this.hotSubMenus).length === 0;\n    }\n    /**\n     * Destroy instance.\n     */\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var menuContainerParentElement = this.container.parentNode;\n      this.clearLocalHooks();\n      this.close();\n      this.parentMenu = null;\n      this.eventManager.destroy();\n      if (menuContainerParentElement) {\n        menuContainerParentElement.removeChild(this.container);\n      }\n    }\n    /**\n     * Checks if menu was opened.\n     *\n     * @returns {Boolean} Returns `true` if menu was opened.\n     */\n  }, {\n    key: \"isOpened\",\n    value: function isOpened() {\n      return this.hotMenu !== null;\n    }\n    /**\n     * Execute menu command.\n     *\n     * @param {Event} [event]\n     */\n  }, {\n    key: \"executeCommand\",\n    value: function executeCommand(event) {\n      if (!this.isOpened() || !this.hasSelectedItem()) {\n        return;\n      }\n      var selectedItem = this.getSelectedItem();\n      this.runLocalHooks('select', selectedItem, event);\n      if (this.isCommandPassive(selectedItem)) {\n        return;\n      }\n      var selRanges = this.hot.getSelectedRange();\n      var normalizedSelection = selRanges ? normalizeSelection(selRanges) : [];\n      this.runLocalHooks('executeCommand', selectedItem.key, normalizedSelection, event);\n      if (this.isSubMenu()) {\n        this.parentMenu.runLocalHooks('executeCommand', selectedItem.key, normalizedSelection, event);\n      }\n    }\n    /**\n     * Checks if the passed command is passive or not. The command is passive when it's marked as\n     * disabled, the descriptor object contains `isCommand` property set to `false`, command\n     * is a separator, or the item is recognized as submenu. For passive items the menu is not\n     * closed automatically after the user trigger the command through the UI.\n     *\n     * @param {Object} commandDescriptor Selected menu item from the menu data source.\n     * @returns {Boolean}\n     */\n  }, {\n    key: \"isCommandPassive\",\n    value: function isCommandPassive(commandDescriptor) {\n      var isCommand = commandDescriptor.isCommand,\n        commandName = commandDescriptor.name,\n        disabled = commandDescriptor.disabled,\n        submenu = commandDescriptor.submenu;\n      var isItemDisabled = disabled === true || typeof disabled === 'function' && disabled.call(this.hot) === true;\n      return isCommand === false || commandName === SEPARATOR || isItemDisabled === true || submenu;\n    }\n    /**\n     * Set menu position based on dom event or based on literal object.\n     *\n     * @param {Event|Object} coords Event or literal Object with coordinates.\n     */\n  }, {\n    key: \"setPosition\",\n    value: function setPosition(coords) {\n      var cursor = new Cursor(coords, this.container.ownerDocument.defaultView);\n      if (this.options.keepInViewport) {\n        if (cursor.fitsBelow(this.container)) {\n          this.setPositionBelowCursor(cursor);\n        } else if (cursor.fitsAbove(this.container)) {\n          this.setPositionAboveCursor(cursor);\n        } else {\n          this.setPositionBelowCursor(cursor);\n        }\n        if (cursor.fitsOnRight(this.container)) {\n          this.setPositionOnRightOfCursor(cursor);\n        } else {\n          this.setPositionOnLeftOfCursor(cursor);\n        }\n      } else {\n        this.setPositionBelowCursor(cursor);\n        this.setPositionOnRightOfCursor(cursor);\n      }\n    }\n    /**\n     * Set menu position above cursor object.\n     *\n     * @param {Cursor} cursor `Cursor` object.\n     */\n  }, {\n    key: \"setPositionAboveCursor\",\n    value: function setPositionAboveCursor(cursor) {\n      var top = this.offset.above + cursor.top - this.container.offsetHeight;\n      if (this.isSubMenu()) {\n        top = cursor.top + cursor.cellHeight - this.container.offsetHeight + 3;\n      }\n      this.container.style.top = \"\".concat(top, \"px\");\n    }\n    /**\n     * Set menu position below cursor object.\n     *\n     * @param {Cursor} cursor `Cursor` object.\n     */\n  }, {\n    key: \"setPositionBelowCursor\",\n    value: function setPositionBelowCursor(cursor) {\n      var top = this.offset.below + cursor.top;\n      if (this.isSubMenu()) {\n        top = cursor.top - 1;\n      }\n      this.container.style.top = \"\".concat(top, \"px\");\n    }\n    /**\n     * Set menu position on the right of cursor object.\n     *\n     * @param {Cursor} cursor `Cursor` object.\n     */\n  }, {\n    key: \"setPositionOnRightOfCursor\",\n    value: function setPositionOnRightOfCursor(cursor) {\n      var left;\n      if (this.isSubMenu()) {\n        left = 1 + cursor.left + cursor.cellWidth;\n      } else {\n        left = this.offset.right + 1 + cursor.left;\n      }\n      this.container.style.left = \"\".concat(left, \"px\");\n    }\n    /**\n     * Set menu position on the left of cursor object.\n     *\n     * @param {Cursor} cursor `Cursor` object.\n     */\n  }, {\n    key: \"setPositionOnLeftOfCursor\",\n    value: function setPositionOnLeftOfCursor(cursor) {\n      var left = this.offset.left + cursor.left - this.container.offsetWidth + getScrollbarWidth(this.hot.rootDocument) + 4;\n      this.container.style.left = \"\".concat(left, \"px\");\n    }\n    /**\n     * Select first cell in opened menu.\n     */\n  }, {\n    key: \"selectFirstCell\",\n    value: function selectFirstCell() {\n      var cell = this.hotMenu.getCell(0, 0);\n      if (isSeparator(cell) || isDisabled(cell) || isSelectionDisabled(cell)) {\n        this.selectNextCell(0, 0);\n      } else {\n        this.hotMenu.selectCell(0, 0);\n      }\n    }\n    /**\n     * Select last cell in opened menu.\n     */\n  }, {\n    key: \"selectLastCell\",\n    value: function selectLastCell() {\n      var lastRow = this.hotMenu.countRows() - 1;\n      var cell = this.hotMenu.getCell(lastRow, 0);\n      if (isSeparator(cell) || isDisabled(cell) || isSelectionDisabled(cell)) {\n        this.selectPrevCell(lastRow, 0);\n      } else {\n        this.hotMenu.selectCell(lastRow, 0);\n      }\n    }\n    /**\n     * Select next cell in opened menu.\n     *\n     * @param {Number} row Row index.\n     * @param {Number} col Column index.\n     */\n  }, {\n    key: \"selectNextCell\",\n    value: function selectNextCell(row, col) {\n      var nextRow = row + 1;\n      var cell = nextRow < this.hotMenu.countRows() ? this.hotMenu.getCell(nextRow, col) : null;\n      if (!cell) {\n        return;\n      }\n      if (isSeparator(cell) || isDisabled(cell) || isSelectionDisabled(cell)) {\n        this.selectNextCell(nextRow, col);\n      } else {\n        this.hotMenu.selectCell(nextRow, col);\n      }\n    }\n    /**\n     * Select previous cell in opened menu.\n     *\n     * @param {Number} row Row index.\n     * @param {Number} col Column index.\n     */\n  }, {\n    key: \"selectPrevCell\",\n    value: function selectPrevCell(row, col) {\n      var prevRow = row - 1;\n      var cell = prevRow >= 0 ? this.hotMenu.getCell(prevRow, col) : null;\n      if (!cell) {\n        return;\n      }\n      if (isSeparator(cell) || isDisabled(cell) || isSelectionDisabled(cell)) {\n        this.selectPrevCell(prevRow, col);\n      } else {\n        this.hotMenu.selectCell(prevRow, col);\n      }\n    }\n    /**\n     * Menu item renderer.\n     *\n     * @private\n     */\n  }, {\n    key: \"menuItemRenderer\",\n    value: function menuItemRenderer(hot, TD, row, col, prop, value) {\n      var _this4 = this;\n      var item = hot.getSourceDataAtRow(row);\n      var wrapper = this.hot.rootDocument.createElement('div');\n      var isSubMenu = function isSubMenu(itemToTest) {\n        return hasOwnProperty(itemToTest, 'submenu');\n      };\n      var itemIsSeparator = function itemIsSeparator(itemToTest) {\n        return new RegExp(SEPARATOR, 'i').test(itemToTest.name);\n      };\n      var itemIsDisabled = function itemIsDisabled(itemToTest) {\n        return itemToTest.disabled === true || typeof itemToTest.disabled === 'function' && itemToTest.disabled.call(_this4.hot) === true;\n      };\n      var itemIsSelectionDisabled = function itemIsSelectionDisabled(itemToTest) {\n        return itemToTest.disableSelection;\n      };\n      var itemValue = value;\n      if (typeof itemValue === 'function') {\n        itemValue = itemValue.call(this.hot);\n      }\n      empty(TD);\n      addClass(wrapper, 'htItemWrapper');\n      TD.appendChild(wrapper);\n      if (itemIsSeparator(item)) {\n        addClass(TD, 'htSeparator');\n      } else if (typeof item.renderer === 'function') {\n        addClass(TD, 'htCustomMenuRenderer');\n        TD.appendChild(item.renderer(hot, wrapper, row, col, prop, itemValue));\n      } else {\n        fastInnerHTML(wrapper, itemValue);\n      }\n      if (itemIsDisabled(item)) {\n        addClass(TD, 'htDisabled');\n        this.eventManager.addEventListener(TD, 'mouseenter', function () {\n          return hot.deselectCell();\n        });\n      } else if (itemIsSelectionDisabled(item)) {\n        addClass(TD, 'htSelectionDisabled');\n        this.eventManager.addEventListener(TD, 'mouseenter', function () {\n          return hot.deselectCell();\n        });\n      } else if (isSubMenu(item)) {\n        addClass(TD, 'htSubmenu');\n        if (itemIsSelectionDisabled(item)) {\n          this.eventManager.addEventListener(TD, 'mouseenter', function () {\n            return hot.deselectCell();\n          });\n        } else {\n          this.eventManager.addEventListener(TD, 'mouseenter', function () {\n            return hot.selectCell(row, col, void 0, void 0, false, false);\n          });\n        }\n      } else {\n        removeClass(TD, ['htSubmenu', 'htDisabled']);\n        if (itemIsSelectionDisabled(item)) {\n          this.eventManager.addEventListener(TD, 'mouseenter', function () {\n            return hot.deselectCell();\n          });\n        } else {\n          this.eventManager.addEventListener(TD, 'mouseenter', function () {\n            return hot.selectCell(row, col, void 0, void 0, false, false);\n          });\n        }\n      }\n    }\n    /**\n     * Create container/wrapper for handsontable.\n     *\n     * @private\n     * @param {String} [name] Class name.\n     * @returns {HTMLElement}\n     */\n  }, {\n    key: \"createContainer\",\n    value: function createContainer() {\n      var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var doc = this.options.container.ownerDocument;\n      var className = name;\n      var container;\n      if (className) {\n        if (isFunction(className)) {\n          className = className.call(this.hot);\n          if (className === null || isUndefined(className)) {\n            className = '';\n          } else {\n            className = className.toString();\n          }\n        }\n        className = className.replace(/[^A-z0-9]/g, '_');\n        className = \"\".concat(this.options.className, \"Sub_\").concat(className);\n        container = doc.querySelector(\".\".concat(this.options.className, \".\").concat(className));\n      }\n      if (!container) {\n        container = doc.createElement('div');\n        addClass(container, \"htMenu \".concat(this.options.className));\n        if (className) {\n          addClass(container, className);\n        }\n        this.options.container.appendChild(container);\n      }\n      return container;\n    }\n    /**\n     * @private\n     */\n  }, {\n    key: \"blockMainTableCallbacks\",\n    value: function blockMainTableCallbacks() {\n      this._afterScrollCallback = function () {};\n      this.hot.addHook('afterScrollVertically', this._afterScrollCallback);\n      this.hot.addHook('afterScrollHorizontally', this._afterScrollCallback);\n    }\n    /**\n     * @private\n     */\n  }, {\n    key: \"releaseMainTableCallbacks\",\n    value: function releaseMainTableCallbacks() {\n      if (this._afterScrollCallback) {\n        this.hot.removeHook('afterScrollVertically', this._afterScrollCallback);\n        this.hot.removeHook('afterScrollHorizontally', this._afterScrollCallback);\n        this._afterScrollCallback = null;\n      }\n    }\n    /**\n     * On before key down listener.\n     *\n     * @private\n     * @param {Event} event\n     */\n  }, {\n    key: \"onBeforeKeyDown\",\n    value: function onBeforeKeyDown(event) {\n      // For input elements, prevent event propagation. It allows entering text into an input\n      // element freely - without steeling the key events from the menu module (#6506, #6549).\n      if (isInput(event.target) && this.container.contains(event.target)) {\n        stopImmediatePropagation(event);\n        return;\n      }\n      var selection = this.hotMenu.getSelectedLast();\n      var stopEvent = false;\n      this.keyEvent = true;\n      switch (event.keyCode) {\n        case KEY_CODES.ESCAPE:\n          this.close();\n          stopEvent = true;\n          break;\n        case KEY_CODES.ENTER:\n          if (selection) {\n            if (this.hotMenu.getSourceDataAtRow(selection[0]).submenu) {\n              stopEvent = true;\n            } else {\n              this.executeCommand(event);\n              this.close(true);\n            }\n          }\n          break;\n        case KEY_CODES.ARROW_DOWN:\n          if (selection) {\n            this.selectNextCell(selection[0], selection[1]);\n          } else {\n            this.selectFirstCell();\n          }\n          stopEvent = true;\n          break;\n        case KEY_CODES.ARROW_UP:\n          if (selection) {\n            this.selectPrevCell(selection[0], selection[1]);\n          } else {\n            this.selectLastCell();\n          }\n          stopEvent = true;\n          break;\n        case KEY_CODES.ARROW_RIGHT:\n          if (selection) {\n            var menu = this.openSubMenu(selection[0]);\n            if (menu) {\n              menu.selectFirstCell();\n            }\n          }\n          stopEvent = true;\n          break;\n        case KEY_CODES.ARROW_LEFT:\n          if (selection && this.isSubMenu()) {\n            this.close();\n            if (this.parentMenu) {\n              this.parentMenu.hotMenu.listen();\n            }\n            stopEvent = true;\n          }\n          break;\n        default:\n          break;\n      }\n      if (stopEvent) {\n        event.preventDefault();\n        stopImmediatePropagation(event);\n      }\n      this.keyEvent = false;\n    }\n    /**\n     * On after init listener.\n     *\n     * @private\n     */\n  }, {\n    key: \"onAfterInit\",\n    value: function onAfterInit() {\n      var wtTable = this.hotMenu.view.wt.wtTable;\n      var data = this.hotMenu.getSettings().data;\n      var hiderStyle = wtTable.hider.style;\n      var holderStyle = wtTable.holder.style;\n      var currentHiderWidth = parseInt(hiderStyle.width, 10);\n      var realHeight = arrayReduce(data, function (accumulator, value) {\n        return accumulator + (value.name === SEPARATOR ? 1 : 26);\n      }, 0);\n      holderStyle.width = \"\".concat(currentHiderWidth + 22, \"px\");\n      holderStyle.height = \"\".concat(realHeight + 4, \"px\");\n      hiderStyle.height = holderStyle.height;\n    }\n    /**\n     * On after selection listener.\n     *\n     * @param {Number} r Selection start row index.\n     * @param {Number} c Selection start column index.\n     * @param {Number} r2 Selection end row index.\n     * @param {Number} c2 Selection end column index.\n     * @param {Object} preventScrolling Object with `value` property where its value change will be observed.\n     * @param {Number} selectionLayerLevel The number which indicates what selection layer is currently modified.\n     */\n  }, {\n    key: \"onAfterSelection\",\n    value: function onAfterSelection(r, c, r2, c2, preventScrolling) {\n      if (this.keyEvent === false) {\n        preventScrolling.value = true;\n      }\n    }\n    /**\n     * Document mouse down listener.\n     *\n     * @private\n     * @param {Event} event\n     */\n  }, {\n    key: \"onDocumentMouseDown\",\n    value: function onDocumentMouseDown(event) {\n      if (!this.isOpened()) {\n        return;\n      } // Close menu when clicked element is not belongs to menu itself\n\n      if (this.options.standalone && this.hotMenu && !isChildOf(event.target, this.hotMenu.rootElement)) {\n        this.close(true); // Automatically close menu when clicked element is not belongs to menu or submenu (not necessarily to itself)\n      } else if ((this.isAllSubMenusClosed() || this.isSubMenu()) && !isChildOf(event.target, '.htMenu') && (isChildOf(event.target, this.container.ownerDocument) || isChildOf(event.target, this.hot.rootDocument))) {\n        this.close(true);\n      }\n    }\n  }]);\n  return Menu;\n}();\nmixin(Menu, localHooks);\nexport default Menu;","map":{"version":3,"names":["_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","Core","addClass","empty","fastInnerHTML","getScrollbarWidth","isChildOf","isInput","removeClass","getParentWindow","arrayEach","arrayFilter","arrayReduce","Cursor","EventManager","mixin","hasOwnProperty","isUndefined","isDefined","debounce","isFunction","filterSeparators","hasSubMenu","isDisabled","isItemHidden","isSeparator","isSelectionDisabled","normalizeSelection","KEY_CODES","localHooks","SEPARATOR","NO_ITEMS","predefinedItems","stopImmediatePropagation","isRightClick","isWindowsOS","MIN_WIDTH","Menu","hotInstance","options","hot","parent","name","className","keepInViewport","standalone","minWidth","container","rootDocument","documentElement","eventManager","createContainer","hotMenu","hotSubMenus","parentMenu","menuItems","origOutsideClickDeselects","keyEvent","offset","above","below","left","right","_afterScrollCallback","registerEvents","value","_this","frame","rootWindow","addEventListener","document","event","onDocumentMouseDown","setMenuItems","getSelectedItem","hasSelectedItem","getSourceDataAtRow","getSelectedLast","Array","isArray","setOffset","area","arguments","undefined","isSubMenu","open","_this2","runLocalHooks","removeAttribute","style","display","delayedOpenSubMenu","row","openSubMenu","minWidthOfMenu","noItemsDefined","filteredItems","item","push","shouldAutoCloseMenu","settings","data","colHeaders","autoColumnSize","autoWrapRow","modifyColWidth","width","autoRowSize","readOnly","editor","copyPaste","columns","renderer","TD","col","prop","menuItemRenderer","renderAllRows","fragmentSelection","outsideClickDeselects","disableVisualSelection","beforeKeyDown","onBeforeKeyDown","afterOnCellMouseOver","coords","isAllSubMenusClosed","rowHeights","afterOnCellContextMenu","preventDefault","close","beforeOnCellMouseUp","isCommandPassive","executeCommand","afterOnCellMouseUp","afterUnlisten","isOpened","listen","getSettings","addHook","onAfterInit","onAfterSelection","apply","init","blockMainTableCallbacks","closeParent","closeAllSubMenus","releaseMainTableCallbacks","destroy","cell","getCell","dataItem","subMenu","submenu","items","setPosition","getBoundingClientRect","closeSubMenu","menus","_this3","getData","keys","menuContainerParentElement","parentNode","clearLocalHooks","removeChild","selectedItem","selRanges","getSelectedRange","normalizedSelection","commandDescriptor","isCommand","commandName","disabled","isItemDisabled","call","cursor","ownerDocument","defaultView","fitsBelow","setPositionBelowCursor","fitsAbove","setPositionAboveCursor","fitsOnRight","setPositionOnRightOfCursor","setPositionOnLeftOfCursor","top","offsetHeight","cellHeight","concat","cellWidth","offsetWidth","selectFirstCell","selectNextCell","selectCell","selectLastCell","lastRow","countRows","selectPrevCell","nextRow","prevRow","_this4","wrapper","createElement","itemToTest","itemIsSeparator","RegExp","test","itemIsDisabled","itemIsSelectionDisabled","disableSelection","itemValue","appendChild","deselectCell","doc","toString","replace","querySelector","removeHook","contains","selection","stopEvent","keyCode","ESCAPE","ENTER","ARROW_DOWN","ARROW_UP","ARROW_RIGHT","menu","ARROW_LEFT","wtTable","view","wt","hiderStyle","hider","holderStyle","holder","currentHiderWidth","parseInt","realHeight","accumulator","height","r","c","r2","c2","preventScrolling","rootElement"],"sources":["C:/Users/mrezy/VSCode/internships-master/node_modules/handsontable/es/plugins/contextMenu/menu.js"],"sourcesContent":["import \"core-js/modules/es.array.concat\";\nimport \"core-js/modules/es.function.name\";\nimport \"core-js/modules/es.object.keys\";\nimport \"core-js/modules/es.object.to-string\";\nimport \"core-js/modules/es.regexp.constructor\";\nimport \"core-js/modules/es.regexp.exec\";\nimport \"core-js/modules/es.regexp.to-string\";\nimport \"core-js/modules/es.string.replace\";\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport Core from './../../core';\nimport { addClass, empty, fastInnerHTML, getScrollbarWidth, isChildOf, isInput, removeClass, getParentWindow } from './../../helpers/dom/element';\nimport { arrayEach, arrayFilter, arrayReduce } from './../../helpers/array';\nimport Cursor from './cursor';\nimport EventManager from './../../eventManager';\nimport { mixin, hasOwnProperty } from './../../helpers/object';\nimport { isUndefined, isDefined } from './../../helpers/mixed';\nimport { debounce, isFunction } from './../../helpers/function';\nimport { filterSeparators, hasSubMenu, isDisabled, isItemHidden, isSeparator, isSelectionDisabled, normalizeSelection } from './utils';\nimport { KEY_CODES } from './../../helpers/unicode';\nimport localHooks from './../../mixins/localHooks';\nimport { SEPARATOR, NO_ITEMS, predefinedItems } from './predefinedItems';\nimport { stopImmediatePropagation, isRightClick } from './../../helpers/dom/event';\nimport { isWindowsOS } from './../../helpers/browser';\nvar MIN_WIDTH = 215;\n/**\n * @class Menu\n * @plugin ContextMenu\n */\n\nvar Menu =\n/*#__PURE__*/\nfunction () {\n  function Menu(hotInstance, options) {\n    _classCallCheck(this, Menu);\n\n    this.hot = hotInstance;\n    this.options = options || {\n      parent: null,\n      name: null,\n      className: '',\n      keepInViewport: true,\n      standalone: false,\n      minWidth: MIN_WIDTH,\n      container: this.hot.rootDocument.documentElement\n    };\n    this.eventManager = new EventManager(this);\n    this.container = this.createContainer(this.options.name);\n    this.hotMenu = null;\n    this.hotSubMenus = {};\n    this.parentMenu = this.options.parent || null;\n    this.menuItems = null;\n    this.origOutsideClickDeselects = null;\n    this.keyEvent = false;\n    this.offset = {\n      above: 0,\n      below: 0,\n      left: 0,\n      right: 0\n    };\n    this._afterScrollCallback = null;\n    this.registerEvents();\n  }\n  /**\n   * Register event listeners.\n   *\n   * @private\n   */\n\n\n  _createClass(Menu, [{\n    key: \"registerEvents\",\n    value: function registerEvents() {\n      var _this = this;\n\n      var frame = this.hot.rootWindow;\n\n      while (frame) {\n        this.eventManager.addEventListener(frame.document, 'mousedown', function (event) {\n          return _this.onDocumentMouseDown(event);\n        });\n        frame = getParentWindow(frame);\n      }\n    }\n    /**\n     * Set array of objects which defines menu items.\n     *\n     * @param {Array} menuItems Menu items to display.\n     */\n\n  }, {\n    key: \"setMenuItems\",\n    value: function setMenuItems(menuItems) {\n      this.menuItems = menuItems;\n    }\n    /**\n     * Returns currently selected menu item. Returns `null` if no item was selected.\n     *\n     * @returns {Object|null}\n     */\n\n  }, {\n    key: \"getSelectedItem\",\n    value: function getSelectedItem() {\n      return this.hasSelectedItem() ? this.hotMenu.getSourceDataAtRow(this.hotMenu.getSelectedLast()[0]) : null;\n    }\n    /**\n     * Checks if the menu has selected (highlighted) any item from the menu list.\n     *\n     * @returns {Boolean}\n     */\n\n  }, {\n    key: \"hasSelectedItem\",\n    value: function hasSelectedItem() {\n      return Array.isArray(this.hotMenu.getSelectedLast());\n    }\n    /**\n     * Set offset menu position for specified area (`above`, `below`, `left` or `right`).\n     *\n     * @param {String} area Specified area name (`above`, `below`, `left` or `right`).\n     * @param {Number} offset Offset value.\n     */\n\n  }, {\n    key: \"setOffset\",\n    value: function setOffset(area) {\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      this.offset[area] = offset;\n    }\n    /**\n     * Check if menu is using as sub-menu.\n     *\n     * @returns {Boolean}\n     */\n\n  }, {\n    key: \"isSubMenu\",\n    value: function isSubMenu() {\n      return this.parentMenu !== null;\n    }\n    /**\n     * Open menu.\n     *\n     * @fires Hooks#beforeContextMenuShow\n     * @fires Hooks#afterContextMenuShow\n     */\n\n  }, {\n    key: \"open\",\n    value: function open() {\n      var _this2 = this;\n\n      this.runLocalHooks('beforeOpen');\n      this.container.removeAttribute('style');\n      this.container.style.display = 'block';\n      var delayedOpenSubMenu = debounce(function (row) {\n        return _this2.openSubMenu(row);\n      }, 300);\n      var minWidthOfMenu = this.options.minWidth || MIN_WIDTH;\n      var noItemsDefined = false;\n      var filteredItems = arrayFilter(this.menuItems, function (item) {\n        if (item.key === NO_ITEMS) {\n          noItemsDefined = true;\n        }\n\n        return isItemHidden(item, _this2.hot);\n      });\n\n      if (filteredItems.length < 1 && !noItemsDefined) {\n        filteredItems.push(predefinedItems()[NO_ITEMS]);\n      } else if (filteredItems.length === 0) {\n        return;\n      }\n\n      filteredItems = filterSeparators(filteredItems, SEPARATOR);\n      var shouldAutoCloseMenu = false;\n      var settings = {\n        data: filteredItems,\n        colHeaders: false,\n        autoColumnSize: true,\n        autoWrapRow: false,\n        modifyColWidth: function modifyColWidth(width) {\n          if (isDefined(width) && width < minWidthOfMenu) {\n            return minWidthOfMenu;\n          }\n\n          return width;\n        },\n        autoRowSize: false,\n        readOnly: true,\n        editor: false,\n        copyPaste: false,\n        columns: [{\n          data: 'name',\n          renderer: function renderer(hot, TD, row, col, prop, value) {\n            return _this2.menuItemRenderer(hot, TD, row, col, prop, value);\n          }\n        }],\n        renderAllRows: true,\n        fragmentSelection: false,\n        outsideClickDeselects: false,\n        disableVisualSelection: 'area',\n        beforeKeyDown: function beforeKeyDown(event) {\n          return _this2.onBeforeKeyDown(event);\n        },\n        afterOnCellMouseOver: function afterOnCellMouseOver(event, coords) {\n          if (_this2.isAllSubMenusClosed()) {\n            delayedOpenSubMenu(coords.row);\n          } else {\n            _this2.openSubMenu(coords.row);\n          }\n        },\n        rowHeights: function rowHeights(row) {\n          return filteredItems[row].name === SEPARATOR ? 1 : 23;\n        },\n        afterOnCellContextMenu: function afterOnCellContextMenu(event) {\n          event.preventDefault(); // On the Windows platform, the \"contextmenu\" is triggered after the \"mouseup\" so that's\n          // why the closing menu is here. (#6507#issuecomment-582392301).\n\n          if (isWindowsOS() && shouldAutoCloseMenu && _this2.hasSelectedItem()) {\n            _this2.close(true);\n          }\n        },\n        beforeOnCellMouseUp: function beforeOnCellMouseUp(event) {\n          if (_this2.hasSelectedItem()) {\n            shouldAutoCloseMenu = !_this2.isCommandPassive(_this2.getSelectedItem());\n\n            _this2.executeCommand(event);\n          }\n        },\n        afterOnCellMouseUp: function afterOnCellMouseUp(event) {\n          // If the code runs on the other platform than Windows, the \"mouseup\" is triggered\n          // after the \"contextmenu\". So then \"mouseup\" closes the menu. Otherwise, the closing\n          // menu responsibility is forwarded to \"afterOnCellContextMenu\" callback (#6507#issuecomment-582392301).\n          if ((!isWindowsOS() || !isRightClick(event)) && shouldAutoCloseMenu && _this2.hasSelectedItem()) {\n            _this2.close(true);\n          }\n        },\n        afterUnlisten: function afterUnlisten() {\n          // Restore menu focus, fix for `this.instance.unlisten();` call in the tableView.js@260 file.\n          // This prevents losing table responsiveness for keyboard events when filter select menu is closed (#6497).\n          if (!_this2.hasSelectedItem() && _this2.isOpened()) {\n            _this2.hotMenu.listen(false);\n          }\n        }\n      };\n      this.origOutsideClickDeselects = this.hot.getSettings().outsideClickDeselects;\n      this.hot.getSettings().outsideClickDeselects = false;\n      this.hotMenu = new Core(this.container, settings);\n      this.hotMenu.addHook('afterInit', function () {\n        return _this2.onAfterInit();\n      });\n      this.hotMenu.addHook('afterSelection', function () {\n        return _this2.onAfterSelection.apply(_this2, arguments);\n      });\n      this.hotMenu.init();\n      this.hotMenu.listen();\n      this.blockMainTableCallbacks();\n      this.runLocalHooks('afterOpen');\n    }\n    /**\n     * Close menu.\n     *\n     * @param {Boolean} [closeParent=false] if `true` try to close parent menu if exists.\n     */\n\n  }, {\n    key: \"close\",\n    value: function close() {\n      var closeParent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      if (!this.isOpened()) {\n        return;\n      }\n\n      if (closeParent && this.parentMenu) {\n        this.parentMenu.close();\n      } else {\n        this.closeAllSubMenus();\n        this.container.style.display = 'none';\n        this.releaseMainTableCallbacks();\n        this.hotMenu.destroy();\n        this.hotMenu = null;\n        this.hot.getSettings().outsideClickDeselects = this.origOutsideClickDeselects;\n        this.runLocalHooks('afterClose');\n\n        if (this.parentMenu) {\n          this.parentMenu.hotMenu.listen();\n        }\n      }\n    }\n    /**\n     * Open sub menu at the provided row index.\n     *\n     * @param {Number} row Row index.\n     * @returns {Menu|Boolean} Returns created menu or `false` if no one menu was created.\n     */\n\n  }, {\n    key: \"openSubMenu\",\n    value: function openSubMenu(row) {\n      if (!this.hotMenu) {\n        return false;\n      }\n\n      var cell = this.hotMenu.getCell(row, 0);\n      this.closeAllSubMenus();\n\n      if (!cell || !hasSubMenu(cell)) {\n        return false;\n      }\n\n      var dataItem = this.hotMenu.getSourceDataAtRow(row);\n      var subMenu = new Menu(this.hot, {\n        parent: this,\n        name: dataItem.name,\n        className: this.options.className,\n        keepInViewport: true,\n        container: this.options.container\n      });\n      subMenu.setMenuItems(dataItem.submenu.items);\n      subMenu.open();\n      subMenu.setPosition(cell.getBoundingClientRect());\n      this.hotSubMenus[dataItem.key] = subMenu;\n      return subMenu;\n    }\n    /**\n     * Close sub menu at row index.\n     *\n     * @param {Number} row Row index.\n     */\n\n  }, {\n    key: \"closeSubMenu\",\n    value: function closeSubMenu(row) {\n      var dataItem = this.hotMenu.getSourceDataAtRow(row);\n      var menus = this.hotSubMenus[dataItem.key];\n\n      if (menus) {\n        menus.destroy();\n        delete this.hotSubMenus[dataItem.key];\n      }\n    }\n    /**\n     * Close all opened sub menus.\n     */\n\n  }, {\n    key: \"closeAllSubMenus\",\n    value: function closeAllSubMenus() {\n      var _this3 = this;\n\n      arrayEach(this.hotMenu.getData(), function (value, row) {\n        return _this3.closeSubMenu(row);\n      });\n    }\n    /**\n     * Checks if all created and opened sub menus are closed.\n     *\n     * @returns {Boolean}\n     */\n\n  }, {\n    key: \"isAllSubMenusClosed\",\n    value: function isAllSubMenusClosed() {\n      return Object.keys(this.hotSubMenus).length === 0;\n    }\n    /**\n     * Destroy instance.\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var menuContainerParentElement = this.container.parentNode;\n      this.clearLocalHooks();\n      this.close();\n      this.parentMenu = null;\n      this.eventManager.destroy();\n\n      if (menuContainerParentElement) {\n        menuContainerParentElement.removeChild(this.container);\n      }\n    }\n    /**\n     * Checks if menu was opened.\n     *\n     * @returns {Boolean} Returns `true` if menu was opened.\n     */\n\n  }, {\n    key: \"isOpened\",\n    value: function isOpened() {\n      return this.hotMenu !== null;\n    }\n    /**\n     * Execute menu command.\n     *\n     * @param {Event} [event]\n     */\n\n  }, {\n    key: \"executeCommand\",\n    value: function executeCommand(event) {\n      if (!this.isOpened() || !this.hasSelectedItem()) {\n        return;\n      }\n\n      var selectedItem = this.getSelectedItem();\n      this.runLocalHooks('select', selectedItem, event);\n\n      if (this.isCommandPassive(selectedItem)) {\n        return;\n      }\n\n      var selRanges = this.hot.getSelectedRange();\n      var normalizedSelection = selRanges ? normalizeSelection(selRanges) : [];\n      this.runLocalHooks('executeCommand', selectedItem.key, normalizedSelection, event);\n\n      if (this.isSubMenu()) {\n        this.parentMenu.runLocalHooks('executeCommand', selectedItem.key, normalizedSelection, event);\n      }\n    }\n    /**\n     * Checks if the passed command is passive or not. The command is passive when it's marked as\n     * disabled, the descriptor object contains `isCommand` property set to `false`, command\n     * is a separator, or the item is recognized as submenu. For passive items the menu is not\n     * closed automatically after the user trigger the command through the UI.\n     *\n     * @param {Object} commandDescriptor Selected menu item from the menu data source.\n     * @returns {Boolean}\n     */\n\n  }, {\n    key: \"isCommandPassive\",\n    value: function isCommandPassive(commandDescriptor) {\n      var isCommand = commandDescriptor.isCommand,\n          commandName = commandDescriptor.name,\n          disabled = commandDescriptor.disabled,\n          submenu = commandDescriptor.submenu;\n      var isItemDisabled = disabled === true || typeof disabled === 'function' && disabled.call(this.hot) === true;\n      return isCommand === false || commandName === SEPARATOR || isItemDisabled === true || submenu;\n    }\n    /**\n     * Set menu position based on dom event or based on literal object.\n     *\n     * @param {Event|Object} coords Event or literal Object with coordinates.\n     */\n\n  }, {\n    key: \"setPosition\",\n    value: function setPosition(coords) {\n      var cursor = new Cursor(coords, this.container.ownerDocument.defaultView);\n\n      if (this.options.keepInViewport) {\n        if (cursor.fitsBelow(this.container)) {\n          this.setPositionBelowCursor(cursor);\n        } else if (cursor.fitsAbove(this.container)) {\n          this.setPositionAboveCursor(cursor);\n        } else {\n          this.setPositionBelowCursor(cursor);\n        }\n\n        if (cursor.fitsOnRight(this.container)) {\n          this.setPositionOnRightOfCursor(cursor);\n        } else {\n          this.setPositionOnLeftOfCursor(cursor);\n        }\n      } else {\n        this.setPositionBelowCursor(cursor);\n        this.setPositionOnRightOfCursor(cursor);\n      }\n    }\n    /**\n     * Set menu position above cursor object.\n     *\n     * @param {Cursor} cursor `Cursor` object.\n     */\n\n  }, {\n    key: \"setPositionAboveCursor\",\n    value: function setPositionAboveCursor(cursor) {\n      var top = this.offset.above + cursor.top - this.container.offsetHeight;\n\n      if (this.isSubMenu()) {\n        top = cursor.top + cursor.cellHeight - this.container.offsetHeight + 3;\n      }\n\n      this.container.style.top = \"\".concat(top, \"px\");\n    }\n    /**\n     * Set menu position below cursor object.\n     *\n     * @param {Cursor} cursor `Cursor` object.\n     */\n\n  }, {\n    key: \"setPositionBelowCursor\",\n    value: function setPositionBelowCursor(cursor) {\n      var top = this.offset.below + cursor.top;\n\n      if (this.isSubMenu()) {\n        top = cursor.top - 1;\n      }\n\n      this.container.style.top = \"\".concat(top, \"px\");\n    }\n    /**\n     * Set menu position on the right of cursor object.\n     *\n     * @param {Cursor} cursor `Cursor` object.\n     */\n\n  }, {\n    key: \"setPositionOnRightOfCursor\",\n    value: function setPositionOnRightOfCursor(cursor) {\n      var left;\n\n      if (this.isSubMenu()) {\n        left = 1 + cursor.left + cursor.cellWidth;\n      } else {\n        left = this.offset.right + 1 + cursor.left;\n      }\n\n      this.container.style.left = \"\".concat(left, \"px\");\n    }\n    /**\n     * Set menu position on the left of cursor object.\n     *\n     * @param {Cursor} cursor `Cursor` object.\n     */\n\n  }, {\n    key: \"setPositionOnLeftOfCursor\",\n    value: function setPositionOnLeftOfCursor(cursor) {\n      var left = this.offset.left + cursor.left - this.container.offsetWidth + getScrollbarWidth(this.hot.rootDocument) + 4;\n      this.container.style.left = \"\".concat(left, \"px\");\n    }\n    /**\n     * Select first cell in opened menu.\n     */\n\n  }, {\n    key: \"selectFirstCell\",\n    value: function selectFirstCell() {\n      var cell = this.hotMenu.getCell(0, 0);\n\n      if (isSeparator(cell) || isDisabled(cell) || isSelectionDisabled(cell)) {\n        this.selectNextCell(0, 0);\n      } else {\n        this.hotMenu.selectCell(0, 0);\n      }\n    }\n    /**\n     * Select last cell in opened menu.\n     */\n\n  }, {\n    key: \"selectLastCell\",\n    value: function selectLastCell() {\n      var lastRow = this.hotMenu.countRows() - 1;\n      var cell = this.hotMenu.getCell(lastRow, 0);\n\n      if (isSeparator(cell) || isDisabled(cell) || isSelectionDisabled(cell)) {\n        this.selectPrevCell(lastRow, 0);\n      } else {\n        this.hotMenu.selectCell(lastRow, 0);\n      }\n    }\n    /**\n     * Select next cell in opened menu.\n     *\n     * @param {Number} row Row index.\n     * @param {Number} col Column index.\n     */\n\n  }, {\n    key: \"selectNextCell\",\n    value: function selectNextCell(row, col) {\n      var nextRow = row + 1;\n      var cell = nextRow < this.hotMenu.countRows() ? this.hotMenu.getCell(nextRow, col) : null;\n\n      if (!cell) {\n        return;\n      }\n\n      if (isSeparator(cell) || isDisabled(cell) || isSelectionDisabled(cell)) {\n        this.selectNextCell(nextRow, col);\n      } else {\n        this.hotMenu.selectCell(nextRow, col);\n      }\n    }\n    /**\n     * Select previous cell in opened menu.\n     *\n     * @param {Number} row Row index.\n     * @param {Number} col Column index.\n     */\n\n  }, {\n    key: \"selectPrevCell\",\n    value: function selectPrevCell(row, col) {\n      var prevRow = row - 1;\n      var cell = prevRow >= 0 ? this.hotMenu.getCell(prevRow, col) : null;\n\n      if (!cell) {\n        return;\n      }\n\n      if (isSeparator(cell) || isDisabled(cell) || isSelectionDisabled(cell)) {\n        this.selectPrevCell(prevRow, col);\n      } else {\n        this.hotMenu.selectCell(prevRow, col);\n      }\n    }\n    /**\n     * Menu item renderer.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"menuItemRenderer\",\n    value: function menuItemRenderer(hot, TD, row, col, prop, value) {\n      var _this4 = this;\n\n      var item = hot.getSourceDataAtRow(row);\n      var wrapper = this.hot.rootDocument.createElement('div');\n\n      var isSubMenu = function isSubMenu(itemToTest) {\n        return hasOwnProperty(itemToTest, 'submenu');\n      };\n\n      var itemIsSeparator = function itemIsSeparator(itemToTest) {\n        return new RegExp(SEPARATOR, 'i').test(itemToTest.name);\n      };\n\n      var itemIsDisabled = function itemIsDisabled(itemToTest) {\n        return itemToTest.disabled === true || typeof itemToTest.disabled === 'function' && itemToTest.disabled.call(_this4.hot) === true;\n      };\n\n      var itemIsSelectionDisabled = function itemIsSelectionDisabled(itemToTest) {\n        return itemToTest.disableSelection;\n      };\n\n      var itemValue = value;\n\n      if (typeof itemValue === 'function') {\n        itemValue = itemValue.call(this.hot);\n      }\n\n      empty(TD);\n      addClass(wrapper, 'htItemWrapper');\n      TD.appendChild(wrapper);\n\n      if (itemIsSeparator(item)) {\n        addClass(TD, 'htSeparator');\n      } else if (typeof item.renderer === 'function') {\n        addClass(TD, 'htCustomMenuRenderer');\n        TD.appendChild(item.renderer(hot, wrapper, row, col, prop, itemValue));\n      } else {\n        fastInnerHTML(wrapper, itemValue);\n      }\n\n      if (itemIsDisabled(item)) {\n        addClass(TD, 'htDisabled');\n        this.eventManager.addEventListener(TD, 'mouseenter', function () {\n          return hot.deselectCell();\n        });\n      } else if (itemIsSelectionDisabled(item)) {\n        addClass(TD, 'htSelectionDisabled');\n        this.eventManager.addEventListener(TD, 'mouseenter', function () {\n          return hot.deselectCell();\n        });\n      } else if (isSubMenu(item)) {\n        addClass(TD, 'htSubmenu');\n\n        if (itemIsSelectionDisabled(item)) {\n          this.eventManager.addEventListener(TD, 'mouseenter', function () {\n            return hot.deselectCell();\n          });\n        } else {\n          this.eventManager.addEventListener(TD, 'mouseenter', function () {\n            return hot.selectCell(row, col, void 0, void 0, false, false);\n          });\n        }\n      } else {\n        removeClass(TD, ['htSubmenu', 'htDisabled']);\n\n        if (itemIsSelectionDisabled(item)) {\n          this.eventManager.addEventListener(TD, 'mouseenter', function () {\n            return hot.deselectCell();\n          });\n        } else {\n          this.eventManager.addEventListener(TD, 'mouseenter', function () {\n            return hot.selectCell(row, col, void 0, void 0, false, false);\n          });\n        }\n      }\n    }\n    /**\n     * Create container/wrapper for handsontable.\n     *\n     * @private\n     * @param {String} [name] Class name.\n     * @returns {HTMLElement}\n     */\n\n  }, {\n    key: \"createContainer\",\n    value: function createContainer() {\n      var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var doc = this.options.container.ownerDocument;\n      var className = name;\n      var container;\n\n      if (className) {\n        if (isFunction(className)) {\n          className = className.call(this.hot);\n\n          if (className === null || isUndefined(className)) {\n            className = '';\n          } else {\n            className = className.toString();\n          }\n        }\n\n        className = className.replace(/[^A-z0-9]/g, '_');\n        className = \"\".concat(this.options.className, \"Sub_\").concat(className);\n        container = doc.querySelector(\".\".concat(this.options.className, \".\").concat(className));\n      }\n\n      if (!container) {\n        container = doc.createElement('div');\n        addClass(container, \"htMenu \".concat(this.options.className));\n\n        if (className) {\n          addClass(container, className);\n        }\n\n        this.options.container.appendChild(container);\n      }\n\n      return container;\n    }\n    /**\n     * @private\n     */\n\n  }, {\n    key: \"blockMainTableCallbacks\",\n    value: function blockMainTableCallbacks() {\n      this._afterScrollCallback = function () {};\n\n      this.hot.addHook('afterScrollVertically', this._afterScrollCallback);\n      this.hot.addHook('afterScrollHorizontally', this._afterScrollCallback);\n    }\n    /**\n     * @private\n     */\n\n  }, {\n    key: \"releaseMainTableCallbacks\",\n    value: function releaseMainTableCallbacks() {\n      if (this._afterScrollCallback) {\n        this.hot.removeHook('afterScrollVertically', this._afterScrollCallback);\n        this.hot.removeHook('afterScrollHorizontally', this._afterScrollCallback);\n        this._afterScrollCallback = null;\n      }\n    }\n    /**\n     * On before key down listener.\n     *\n     * @private\n     * @param {Event} event\n     */\n\n  }, {\n    key: \"onBeforeKeyDown\",\n    value: function onBeforeKeyDown(event) {\n      // For input elements, prevent event propagation. It allows entering text into an input\n      // element freely - without steeling the key events from the menu module (#6506, #6549).\n      if (isInput(event.target) && this.container.contains(event.target)) {\n        stopImmediatePropagation(event);\n        return;\n      }\n\n      var selection = this.hotMenu.getSelectedLast();\n      var stopEvent = false;\n      this.keyEvent = true;\n\n      switch (event.keyCode) {\n        case KEY_CODES.ESCAPE:\n          this.close();\n          stopEvent = true;\n          break;\n\n        case KEY_CODES.ENTER:\n          if (selection) {\n            if (this.hotMenu.getSourceDataAtRow(selection[0]).submenu) {\n              stopEvent = true;\n            } else {\n              this.executeCommand(event);\n              this.close(true);\n            }\n          }\n\n          break;\n\n        case KEY_CODES.ARROW_DOWN:\n          if (selection) {\n            this.selectNextCell(selection[0], selection[1]);\n          } else {\n            this.selectFirstCell();\n          }\n\n          stopEvent = true;\n          break;\n\n        case KEY_CODES.ARROW_UP:\n          if (selection) {\n            this.selectPrevCell(selection[0], selection[1]);\n          } else {\n            this.selectLastCell();\n          }\n\n          stopEvent = true;\n          break;\n\n        case KEY_CODES.ARROW_RIGHT:\n          if (selection) {\n            var menu = this.openSubMenu(selection[0]);\n\n            if (menu) {\n              menu.selectFirstCell();\n            }\n          }\n\n          stopEvent = true;\n          break;\n\n        case KEY_CODES.ARROW_LEFT:\n          if (selection && this.isSubMenu()) {\n            this.close();\n\n            if (this.parentMenu) {\n              this.parentMenu.hotMenu.listen();\n            }\n\n            stopEvent = true;\n          }\n\n          break;\n\n        default:\n          break;\n      }\n\n      if (stopEvent) {\n        event.preventDefault();\n        stopImmediatePropagation(event);\n      }\n\n      this.keyEvent = false;\n    }\n    /**\n     * On after init listener.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"onAfterInit\",\n    value: function onAfterInit() {\n      var wtTable = this.hotMenu.view.wt.wtTable;\n      var data = this.hotMenu.getSettings().data;\n      var hiderStyle = wtTable.hider.style;\n      var holderStyle = wtTable.holder.style;\n      var currentHiderWidth = parseInt(hiderStyle.width, 10);\n      var realHeight = arrayReduce(data, function (accumulator, value) {\n        return accumulator + (value.name === SEPARATOR ? 1 : 26);\n      }, 0);\n      holderStyle.width = \"\".concat(currentHiderWidth + 22, \"px\");\n      holderStyle.height = \"\".concat(realHeight + 4, \"px\");\n      hiderStyle.height = holderStyle.height;\n    }\n    /**\n     * On after selection listener.\n     *\n     * @param {Number} r Selection start row index.\n     * @param {Number} c Selection start column index.\n     * @param {Number} r2 Selection end row index.\n     * @param {Number} c2 Selection end column index.\n     * @param {Object} preventScrolling Object with `value` property where its value change will be observed.\n     * @param {Number} selectionLayerLevel The number which indicates what selection layer is currently modified.\n     */\n\n  }, {\n    key: \"onAfterSelection\",\n    value: function onAfterSelection(r, c, r2, c2, preventScrolling) {\n      if (this.keyEvent === false) {\n        preventScrolling.value = true;\n      }\n    }\n    /**\n     * Document mouse down listener.\n     *\n     * @private\n     * @param {Event} event\n     */\n\n  }, {\n    key: \"onDocumentMouseDown\",\n    value: function onDocumentMouseDown(event) {\n      if (!this.isOpened()) {\n        return;\n      } // Close menu when clicked element is not belongs to menu itself\n\n\n      if (this.options.standalone && this.hotMenu && !isChildOf(event.target, this.hotMenu.rootElement)) {\n        this.close(true); // Automatically close menu when clicked element is not belongs to menu or submenu (not necessarily to itself)\n      } else if ((this.isAllSubMenusClosed() || this.isSubMenu()) && !isChildOf(event.target, '.htMenu') && (isChildOf(event.target, this.container.ownerDocument) || isChildOf(event.target, this.hot.rootDocument))) {\n        this.close(true);\n      }\n    }\n  }]);\n\n  return Menu;\n}();\n\nmixin(Menu, localHooks);\nexport default Menu;"],"mappings":"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"},"metadata":{},"sourceType":"module"}