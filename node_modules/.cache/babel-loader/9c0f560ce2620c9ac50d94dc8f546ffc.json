{"ast":null,"code":"function _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n  return _arr;\n}\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\nimport { addClass, clearTextSelection, empty, fastInnerHTML, fastInnerText, getScrollbarWidth, hasClass, isChildOf, isInput, isOutsideInput } from './helpers/dom/element';\nimport EventManager from './eventManager';\nimport { stopPropagation, isImmediatePropagationStopped, isRightClick, isLeftClick } from './helpers/dom/event';\nimport Walkontable from './3rdparty/walkontable/src';\nimport { handleMouseEvent } from './selection/mouseEventHandler';\nvar privatePool = new WeakMap();\n/**\n * @class TableView\n * @private\n */\n\nvar TableView = /*#__PURE__*/\nfunction () {\n  /**\n   * @param {Hanstontable} instance Instance of {@link Handsontable}\n   */\n  function TableView(instance) {\n    _classCallCheck(this, TableView);\n\n    /**\n     * Instance of {@link Handsontable}\n     *\n     * @private\n     * @type {Handsontable}\n     */\n    this.instance = instance;\n    /**\n     * Instance of {@link EventManager}\n     *\n     * @private\n     * @type {EventManager}\n     */\n\n    this.eventManager = new EventManager(instance);\n    /**\n     * Current Handsontable's GridSettings object.\n     *\n     * @private\n     * @type {GridSettings}\n     */\n\n    this.settings = instance.getSettings();\n    /**\n     * Main <THEAD> element.\n     *\n     * @type {HTMLTableSectionElement}\n     */\n\n    this.THEAD = void 0;\n    /**\n     * Main <TBODY> element.\n     *\n     * @type {HTMLTableSectionElement}\n     */\n\n    this.TBODY = void 0;\n    /**\n     * Main Walkontable instance.\n     *\n     * @type {Walkontable}\n     */\n\n    this.wt = void 0;\n    /**\n     * Main Walkontable instance.\n     *\n     * @private\n     * @type {Walkontable}\n     */\n\n    this.activeWt = void 0;\n    privatePool.set(this, {\n      /**\n       * Defines if the text should be selected during mousemove.\n       *\n       * @private\n       * @type {Boolean}\n       */\n      selectionMouseDown: false,\n      /**\n       * @private\n       * @type {Boolean}\n       */\n      mouseDown: void 0,\n      /**\n       * Main <TABLE> element.\n       *\n       * @private\n       * @type {HTMLTableElement}\n       */\n      table: void 0,\n      /**\n       * Cached width of the rootElement.\n       *\n       * @type {Number}\n       */\n      lastWidth: 0,\n      /**\n       * Cached height of the rootElement.\n       *\n       * @type {Number}\n       */\n      lastHeight: 0\n    });\n    this.createElements();\n    this.registerEvents();\n    this.initializeWalkontable();\n  }\n  /**\n   * Renders WalkontableUI.\n   */\n\n  _createClass(TableView, [{\n    key: \"render\",\n    value: function render() {\n      this.wt.draw(!this.instance.forceFullRender);\n      this.instance.forceFullRender = false;\n      this.instance.renderCall = false;\n    }\n    /**\n     * Returns td object given coordinates\n     *\n     * @param {CellCoords} coords\n     * @param {Boolean} topmost\n     * @returns {HTMLTableCellElement|null}\n     */\n  }, {\n    key: \"getCellAtCoords\",\n    value: function getCellAtCoords(coords, topmost) {\n      var td = this.wt.getCell(coords, topmost);\n      if (td < 0) {\n        // there was an exit code (cell is out of bounds)\n        return null;\n      }\n      return td;\n    }\n    /**\n     * Scroll viewport to a cell.\n     *\n     * @param {CellCoords} coords\n     * @param {Boolean} [snapToTop]\n     * @param {Boolean} [snapToRight]\n     * @param {Boolean} [snapToBottom]\n     * @param {Boolean} [snapToLeft]\n     * @returns {Boolean}\n     */\n  }, {\n    key: \"scrollViewport\",\n    value: function scrollViewport(coords, snapToTop, snapToRight, snapToBottom, snapToLeft) {\n      return this.wt.scrollViewport(coords, snapToTop, snapToRight, snapToBottom, snapToLeft);\n    }\n    /**\n     * Scroll viewport to a column.\n     *\n     * @param {Number} column Visual column index.\n     * @param {Boolean} [snapToLeft]\n     * @param {Boolean} [snapToRight]\n     * @returns {Boolean}\n     */\n  }, {\n    key: \"scrollViewportHorizontally\",\n    value: function scrollViewportHorizontally(column, snapToRight, snapToLeft) {\n      return this.wt.scrollViewportHorizontally(column, snapToRight, snapToLeft);\n    }\n    /**\n     * Scroll viewport to a row.\n     *\n     * @param {Number} row Visual row index.\n     * @param {Boolean} [snapToTop]\n     * @param {Boolean} [snapToBottom]\n     * @returns {Boolean}\n     */\n  }, {\n    key: \"scrollViewportVertically\",\n    value: function scrollViewportVertically(row, snapToTop, snapToBottom) {\n      return this.wt.scrollViewportVertically(row, snapToTop, snapToBottom);\n    }\n    /**\n     * Prepares DOMElements and adds correct className to the root element.\n     *\n     * @private\n     */\n  }, {\n    key: \"createElements\",\n    value: function createElements() {\n      var priv = privatePool.get(this);\n      var _this$instance = this.instance,\n        rootElement = _this$instance.rootElement,\n        rootDocument = _this$instance.rootDocument;\n      var originalStyle = rootElement.getAttribute('style');\n      if (originalStyle) {\n        rootElement.setAttribute('data-originalstyle', originalStyle); // needed to retrieve original style in jsFiddle link generator in HT examples. may be removed in future versions\n      }\n\n      addClass(rootElement, 'handsontable');\n      priv.table = rootDocument.createElement('TABLE');\n      addClass(priv.table, 'htCore');\n      if (this.instance.getSettings().tableClassName) {\n        addClass(priv.table, this.instance.getSettings().tableClassName);\n      }\n      this.THEAD = rootDocument.createElement('THEAD');\n      priv.table.appendChild(this.THEAD);\n      this.TBODY = rootDocument.createElement('TBODY');\n      priv.table.appendChild(this.TBODY);\n      this.instance.table = priv.table;\n      this.instance.container.insertBefore(priv.table, this.instance.container.firstChild);\n    }\n    /**\n     * Attaches necessary listeners.\n     *\n     * @private\n     */\n  }, {\n    key: \"registerEvents\",\n    value: function registerEvents() {\n      var _this = this;\n      var priv = privatePool.get(this);\n      var _this$instance2 = this.instance,\n        rootElement = _this$instance2.rootElement,\n        rootDocument = _this$instance2.rootDocument;\n      var documentElement = rootDocument.documentElement;\n      this.eventManager.addEventListener(rootElement, 'mousedown', function (event) {\n        priv.selectionMouseDown = true;\n        if (!_this.isTextSelectionAllowed(event.target)) {\n          var rootWindow = _this.instance.rootWindow;\n          clearTextSelection(rootWindow);\n          event.preventDefault();\n          rootWindow.focus(); // make sure that window that contains HOT is active. Important when HOT is in iframe.\n        }\n      });\n\n      this.eventManager.addEventListener(rootElement, 'mouseup', function () {\n        priv.selectionMouseDown = false;\n      });\n      this.eventManager.addEventListener(rootElement, 'mousemove', function (event) {\n        if (priv.selectionMouseDown && !_this.isTextSelectionAllowed(event.target)) {\n          // Clear selection only when fragmentSelection is enabled, otherwise clearing selection breakes the IME editor.\n          if (_this.settings.fragmentSelection) {\n            clearTextSelection(_this.instance.rootWindow);\n          }\n          event.preventDefault();\n        }\n      });\n      this.eventManager.addEventListener(documentElement, 'keyup', function (event) {\n        if (_this.instance.selection.isInProgress() && !event.shiftKey) {\n          _this.instance.selection.finish();\n        }\n      });\n      this.eventManager.addEventListener(documentElement, 'mouseup', function (event) {\n        if (_this.instance.selection.isInProgress() && isLeftClick(event)) {\n          // is left mouse button\n          _this.instance.selection.finish();\n        }\n        priv.mouseDown = false;\n        if (isOutsideInput(rootDocument.activeElement) || !_this.instance.selection.isSelected() && !isRightClick(event)) {\n          _this.instance.unlisten();\n        }\n      });\n      this.eventManager.addEventListener(documentElement, 'contextmenu', function (event) {\n        if (_this.instance.selection.isInProgress() && isRightClick(event)) {\n          _this.instance.selection.finish();\n          priv.mouseDown = false;\n        }\n      });\n      this.eventManager.addEventListener(documentElement, 'touchend', function () {\n        if (_this.instance.selection.isInProgress()) {\n          _this.instance.selection.finish();\n        }\n        priv.mouseDown = false;\n      });\n      this.eventManager.addEventListener(documentElement, 'mousedown', function (event) {\n        var originalTarget = event.target;\n        var eventX = event.x || event.clientX;\n        var eventY = event.y || event.clientY;\n        var next = event.target;\n        if (priv.mouseDown || !rootElement || !_this.instance.view) {\n          return; // it must have been started in a cell\n        } // immediate click on \"holder\" means click on the right side of vertical scrollbar\n\n        var holder = _this.instance.view.wt.wtTable.holder;\n        if (next === holder) {\n          var scrollbarWidth = getScrollbarWidth(rootDocument);\n          if (rootDocument.elementFromPoint(eventX + scrollbarWidth, eventY) !== holder || rootDocument.elementFromPoint(eventX, eventY + scrollbarWidth) !== holder) {\n            return;\n          }\n        } else {\n          while (next !== documentElement) {\n            if (next === null) {\n              if (event.isTargetWebComponent) {\n                break;\n              } // click on something that was a row but now is detached (possibly because your click triggered a rerender)\n\n              return;\n            }\n            if (next === rootElement) {\n              // click inside container\n              return;\n            }\n            next = next.parentNode;\n          }\n        } // function did not return until here, we have an outside click!\n\n        var outsideClickDeselects = typeof _this.settings.outsideClickDeselects === 'function' ? _this.settings.outsideClickDeselects(originalTarget) : _this.settings.outsideClickDeselects;\n        if (outsideClickDeselects) {\n          _this.instance.deselectCell();\n        } else {\n          _this.instance.destroyEditor(false, false);\n        }\n      });\n      this.eventManager.addEventListener(priv.table, 'selectstart', function (event) {\n        if (_this.settings.fragmentSelection || isInput(event.target)) {\n          return;\n        } // https://github.com/handsontable/handsontable/issues/160\n        // Prevent text from being selected when performing drag down.\n\n        event.preventDefault();\n      });\n    }\n    /**\n     * Defines default configuration and initializes WalkOnTable intance.\n     *\n     * @private\n     */\n  }, {\n    key: \"initializeWalkontable\",\n    value: function initializeWalkontable() {\n      var _this2 = this;\n      var priv = privatePool.get(this);\n      var walkontableConfig = {\n        debug: function debug() {\n          return _this2.settings.debug;\n        },\n        externalRowCalculator: this.instance.getPlugin('autoRowSize') && this.instance.getPlugin('autoRowSize').isEnabled(),\n        table: priv.table,\n        preventOverflow: function preventOverflow() {\n          return _this2.settings.preventOverflow;\n        },\n        preventWheel: function preventWheel() {\n          return _this2.settings.preventWheel;\n        },\n        stretchH: function stretchH() {\n          return _this2.settings.stretchH;\n        },\n        data: this.instance.getDataAtCell,\n        totalRows: function totalRows() {\n          return _this2.instance.countRows();\n        },\n        totalColumns: function totalColumns() {\n          return _this2.instance.countCols();\n        },\n        fixedColumnsLeft: function fixedColumnsLeft() {\n          return _this2.settings.fixedColumnsLeft;\n        },\n        fixedRowsTop: function fixedRowsTop() {\n          return _this2.settings.fixedRowsTop;\n        },\n        fixedRowsBottom: function fixedRowsBottom() {\n          return _this2.settings.fixedRowsBottom;\n        },\n        minSpareRows: function minSpareRows() {\n          return _this2.settings.minSpareRows;\n        },\n        renderAllRows: this.settings.renderAllRows,\n        rowHeaders: function rowHeaders() {\n          var headerRenderers = [];\n          if (_this2.instance.hasRowHeaders()) {\n            headerRenderers.push(function (row, TH) {\n              return _this2.appendRowHeader(row, TH);\n            });\n          }\n          _this2.instance.runHooks('afterGetRowHeaderRenderers', headerRenderers);\n          return headerRenderers;\n        },\n        columnHeaders: function columnHeaders() {\n          var headerRenderers = [];\n          if (_this2.instance.hasColHeaders()) {\n            headerRenderers.push(function (column, TH) {\n              _this2.appendColHeader(column, TH);\n            });\n          }\n          _this2.instance.runHooks('afterGetColumnHeaderRenderers', headerRenderers);\n          return headerRenderers;\n        },\n        columnWidth: this.instance.getColWidth,\n        rowHeight: this.instance.getRowHeight,\n        cellRenderer: function cellRenderer(row, col, TD) {\n          var cellProperties = _this2.instance.getCellMeta(row, col);\n          var prop = _this2.instance.colToProp(col);\n          var value = _this2.instance.getDataAtRowProp(row, prop);\n          if (_this2.instance.hasHook('beforeValueRender')) {\n            value = _this2.instance.runHooks('beforeValueRender', value, cellProperties);\n          }\n          _this2.instance.runHooks('beforeRenderer', TD, row, col, prop, value, cellProperties);\n          _this2.instance.getCellRenderer(cellProperties)(_this2.instance, TD, row, col, prop, value, cellProperties);\n          _this2.instance.runHooks('afterRenderer', TD, row, col, prop, value, cellProperties);\n        },\n        selections: this.instance.selection.highlight,\n        hideBorderOnMouseDownOver: function hideBorderOnMouseDownOver() {\n          return _this2.settings.fragmentSelection;\n        },\n        onWindowResize: function onWindowResize() {\n          if (!_this2.instance || _this2.instance.isDestroyed) {\n            return;\n          }\n          _this2.instance.refreshDimensions();\n        },\n        onCellMouseDown: function onCellMouseDown(event, coords, TD, wt) {\n          var blockCalculations = {\n            row: false,\n            column: false,\n            cell: false\n          };\n          _this2.instance.listen();\n          _this2.activeWt = wt;\n          priv.mouseDown = true;\n          _this2.instance.runHooks('beforeOnCellMouseDown', event, coords, TD, blockCalculations);\n          if (isImmediatePropagationStopped(event)) {\n            return;\n          }\n          handleMouseEvent(event, {\n            coords: coords,\n            selection: _this2.instance.selection,\n            controller: blockCalculations\n          });\n          _this2.instance.runHooks('afterOnCellMouseDown', event, coords, TD);\n          _this2.activeWt = _this2.wt;\n        },\n        onCellContextMenu: function onCellContextMenu(event, coords, TD, wt) {\n          _this2.activeWt = wt;\n          priv.mouseDown = false;\n          if (_this2.instance.selection.isInProgress()) {\n            _this2.instance.selection.finish();\n          }\n          _this2.instance.runHooks('beforeOnCellContextMenu', event, coords, TD);\n          if (isImmediatePropagationStopped(event)) {\n            return;\n          }\n          _this2.instance.runHooks('afterOnCellContextMenu', event, coords, TD);\n          _this2.activeWt = _this2.wt;\n        },\n        onCellMouseOut: function onCellMouseOut(event, coords, TD, wt) {\n          _this2.activeWt = wt;\n          _this2.instance.runHooks('beforeOnCellMouseOut', event, coords, TD);\n          if (isImmediatePropagationStopped(event)) {\n            return;\n          }\n          _this2.instance.runHooks('afterOnCellMouseOut', event, coords, TD);\n          _this2.activeWt = _this2.wt;\n        },\n        onCellMouseOver: function onCellMouseOver(event, coords, TD, wt) {\n          var blockCalculations = {\n            row: false,\n            column: false,\n            cell: false\n          };\n          _this2.activeWt = wt;\n          _this2.instance.runHooks('beforeOnCellMouseOver', event, coords, TD, blockCalculations);\n          if (isImmediatePropagationStopped(event)) {\n            return;\n          }\n          if (priv.mouseDown) {\n            handleMouseEvent(event, {\n              coords: coords,\n              selection: _this2.instance.selection,\n              controller: blockCalculations\n            });\n          }\n          _this2.instance.runHooks('afterOnCellMouseOver', event, coords, TD);\n          _this2.activeWt = _this2.wt;\n        },\n        onCellMouseUp: function onCellMouseUp(event, coords, TD, wt) {\n          _this2.activeWt = wt;\n          _this2.instance.runHooks('beforeOnCellMouseUp', event, coords, TD);\n          if (isImmediatePropagationStopped(event)) {\n            return;\n          }\n          _this2.instance.runHooks('afterOnCellMouseUp', event, coords, TD);\n          _this2.activeWt = _this2.wt;\n        },\n        onCellCornerMouseDown: function onCellCornerMouseDown(event) {\n          event.preventDefault();\n          _this2.instance.runHooks('afterOnCellCornerMouseDown', event);\n        },\n        onCellCornerDblClick: function onCellCornerDblClick(event) {\n          event.preventDefault();\n          _this2.instance.runHooks('afterOnCellCornerDblClick', event);\n        },\n        beforeDraw: function beforeDraw(force, skipRender) {\n          return _this2.beforeRender(force, skipRender);\n        },\n        onDraw: function onDraw(force) {\n          return _this2.onDraw(force);\n        },\n        onScrollVertically: function onScrollVertically() {\n          return _this2.instance.runHooks('afterScrollVertically');\n        },\n        onScrollHorizontally: function onScrollHorizontally() {\n          return _this2.instance.runHooks('afterScrollHorizontally');\n        },\n        onBeforeRemoveCellClassNames: function onBeforeRemoveCellClassNames() {\n          return _this2.instance.runHooks('beforeRemoveCellClassNames');\n        },\n        onAfterDrawSelection: function onAfterDrawSelection(currentRow, currentColumn, cornersOfSelection, layerLevel) {\n          return _this2.instance.runHooks('afterDrawSelection', currentRow, currentColumn, cornersOfSelection, layerLevel);\n        },\n        onBeforeDrawBorders: function onBeforeDrawBorders(corners, borderClassName) {\n          return _this2.instance.runHooks('beforeDrawBorders', corners, borderClassName);\n        },\n        onBeforeTouchScroll: function onBeforeTouchScroll() {\n          return _this2.instance.runHooks('beforeTouchScroll');\n        },\n        onAfterMomentumScroll: function onAfterMomentumScroll() {\n          return _this2.instance.runHooks('afterMomentumScroll');\n        },\n        onBeforeStretchingColumnWidth: function onBeforeStretchingColumnWidth(stretchedWidth, column) {\n          return _this2.instance.runHooks('beforeStretchingColumnWidth', stretchedWidth, column);\n        },\n        onModifyRowHeaderWidth: function onModifyRowHeaderWidth(rowHeaderWidth) {\n          return _this2.instance.runHooks('modifyRowHeaderWidth', rowHeaderWidth);\n        },\n        onModifyGetCellCoords: function onModifyGetCellCoords(row, column, topmost) {\n          return _this2.instance.runHooks('modifyGetCellCoords', row, column, topmost);\n        },\n        viewportRowCalculatorOverride: function viewportRowCalculatorOverride(calc) {\n          var viewportOffset = _this2.settings.viewportRowRenderingOffset;\n          if (viewportOffset === 'auto' && _this2.settings.fixedRowsTop) {\n            viewportOffset = 10;\n          }\n          if (viewportOffset > 0 || viewportOffset === 'auto') {\n            var rows = _this2.instance.countRows();\n            if (typeof viewportOffset === 'number') {\n              calc.startRow = Math.max(calc.startRow - viewportOffset, 0);\n              calc.endRow = Math.min(calc.endRow + viewportOffset, rows - 1);\n            } else if (viewportOffset === 'auto') {\n              var center = calc.startRow + calc.endRow - calc.startRow;\n              var offset = Math.ceil(center / rows * 12);\n              calc.startRow = Math.max(calc.startRow - offset, 0);\n              calc.endRow = Math.min(calc.endRow + offset, rows - 1);\n            }\n          }\n          _this2.instance.runHooks('afterViewportRowCalculatorOverride', calc);\n        },\n        viewportColumnCalculatorOverride: function viewportColumnCalculatorOverride(calc) {\n          var viewportOffset = _this2.settings.viewportColumnRenderingOffset;\n          if (viewportOffset === 'auto' && _this2.settings.fixedColumnsLeft) {\n            viewportOffset = 10;\n          }\n          if (viewportOffset > 0 || viewportOffset === 'auto') {\n            var cols = _this2.instance.countCols();\n            if (typeof viewportOffset === 'number') {\n              calc.startColumn = Math.max(calc.startColumn - viewportOffset, 0);\n              calc.endColumn = Math.min(calc.endColumn + viewportOffset, cols - 1);\n            }\n            if (viewportOffset === 'auto') {\n              var center = calc.startColumn + calc.endColumn - calc.startColumn;\n              var offset = Math.ceil(center / cols * 12);\n              calc.startRow = Math.max(calc.startColumn - offset, 0);\n              calc.endColumn = Math.min(calc.endColumn + offset, cols - 1);\n            }\n          }\n          _this2.instance.runHooks('afterViewportColumnCalculatorOverride', calc);\n        },\n        rowHeaderWidth: function rowHeaderWidth() {\n          return _this2.settings.rowHeaderWidth;\n        },\n        columnHeaderHeight: function columnHeaderHeight() {\n          var columnHeaderHeight = _this2.instance.runHooks('modifyColumnHeaderHeight');\n          return _this2.settings.columnHeaderHeight || columnHeaderHeight;\n        }\n      };\n      this.instance.runHooks('beforeInitWalkontable', walkontableConfig);\n      this.wt = new Walkontable(walkontableConfig);\n      this.activeWt = this.wt;\n      var spreader = this.wt.wtTable.spreader; // We have to cache width and height after Walkontable initialization.\n\n      var _this$instance$rootEl = this.instance.rootElement.getBoundingClientRect(),\n        width = _this$instance$rootEl.width,\n        height = _this$instance$rootEl.height;\n      this.setLastSize(width, height);\n      this.eventManager.addEventListener(spreader, 'mousedown', function (event) {\n        // right mouse button exactly on spreader means right click on the right hand side of vertical scrollbar\n        if (event.target === spreader && event.which === 3) {\n          stopPropagation(event);\n        }\n      });\n      this.eventManager.addEventListener(spreader, 'contextmenu', function (event) {\n        // right mouse button exactly on spreader means right click on the right hand side of vertical scrollbar\n        if (event.target === spreader && event.which === 3) {\n          stopPropagation(event);\n        }\n      });\n      this.eventManager.addEventListener(this.instance.rootDocument.documentElement, 'click', function () {\n        if (_this2.settings.observeDOMVisibility) {\n          if (_this2.wt.drawInterrupted) {\n            _this2.instance.forceFullRender = true;\n            _this2.render();\n          }\n        }\n      });\n    }\n    /**\n     * Checks if it's possible to create text selection in element.\n     *\n     * @private\n     * @param {HTMLElement} el\n     * @returns {Boolean}\n     */\n  }, {\n    key: \"isTextSelectionAllowed\",\n    value: function isTextSelectionAllowed(el) {\n      if (isInput(el)) {\n        return true;\n      }\n      var isChildOfTableBody = isChildOf(el, this.instance.view.wt.wtTable.spreader);\n      if (this.settings.fragmentSelection === true && isChildOfTableBody) {\n        return true;\n      }\n      if (this.settings.fragmentSelection === 'cell' && this.isSelectedOnlyCell() && isChildOfTableBody) {\n        return true;\n      }\n      if (!this.settings.fragmentSelection && this.isCellEdited() && this.isSelectedOnlyCell()) {\n        return true;\n      }\n      return false;\n    }\n    /**\n     * Checks if user's been called mousedown.\n     *\n     * @private\n     * @returns {Boolean}\n     */\n  }, {\n    key: \"isMouseDown\",\n    value: function isMouseDown() {\n      return privatePool.get(this).mouseDown;\n    }\n    /**\n     * Check if selected only one cell.\n     *\n     * @private\n     * @returns {Boolean}\n     */\n  }, {\n    key: \"isSelectedOnlyCell\",\n    value: function isSelectedOnlyCell() {\n      var _ref = this.instance.getSelectedLast() || [],\n        _ref2 = _slicedToArray(_ref, 4),\n        row = _ref2[0],\n        col = _ref2[1],\n        rowEnd = _ref2[2],\n        colEnd = _ref2[3];\n      return row !== void 0 && row === rowEnd && col === colEnd;\n    }\n    /**\n     * Checks if active cell is editing.\n     *\n     * @private\n     * @returns {Boolean}\n     */\n  }, {\n    key: \"isCellEdited\",\n    value: function isCellEdited() {\n      var activeEditor = this.instance.getActiveEditor();\n      return activeEditor && activeEditor.isOpened();\n    }\n    /**\n     * `beforeDraw` callback.\n     *\n     * @private\n     * @param {Boolean} force\n     * @param {Boolean} skipRender\n     */\n  }, {\n    key: \"beforeRender\",\n    value: function beforeRender(force, skipRender) {\n      if (force) {\n        // this.instance.forceFullRender = did Handsontable request full render?\n        this.instance.runHooks('beforeRender', this.instance.forceFullRender, skipRender);\n      }\n    }\n    /**\n     * `onDraw` callback.\n     *\n     * @private\n     * @param {Boolean} force\n     */\n  }, {\n    key: \"onDraw\",\n    value: function onDraw(force) {\n      if (force) {\n        // this.instance.forceFullRender = did Handsontable request full render?\n        this.instance.runHooks('afterRender', this.instance.forceFullRender);\n      }\n    }\n    /**\n     * Append row header to a TH element\n     *\n     * @private\n     * @param row\n     * @param TH\n     */\n  }, {\n    key: \"appendRowHeader\",\n    value: function appendRowHeader(row, TH) {\n      if (TH.firstChild) {\n        var container = TH.firstChild;\n        if (!hasClass(container, 'relative')) {\n          empty(TH);\n          this.appendRowHeader(row, TH);\n          return;\n        }\n        this.updateCellHeader(container.querySelector('.rowHeader'), row, this.instance.getRowHeader);\n      } else {\n        var _this$instance3 = this.instance,\n          rootDocument = _this$instance3.rootDocument,\n          getRowHeader = _this$instance3.getRowHeader;\n        var div = rootDocument.createElement('div');\n        var span = rootDocument.createElement('span');\n        div.className = 'relative';\n        span.className = 'rowHeader';\n        this.updateCellHeader(span, row, getRowHeader);\n        div.appendChild(span);\n        TH.appendChild(div);\n      }\n      this.instance.runHooks('afterGetRowHeader', row, TH);\n    }\n    /**\n     * Append column header to a TH element\n     *\n     * @private\n     * @param col\n     * @param TH\n     */\n  }, {\n    key: \"appendColHeader\",\n    value: function appendColHeader(col, TH) {\n      if (TH.firstChild) {\n        var container = TH.firstChild;\n        if (hasClass(container, 'relative')) {\n          this.updateCellHeader(container.querySelector('.colHeader'), col, this.instance.getColHeader);\n        } else {\n          empty(TH);\n          this.appendColHeader(col, TH);\n        }\n      } else {\n        var rootDocument = this.instance.rootDocument;\n        var div = rootDocument.createElement('div');\n        var span = rootDocument.createElement('span');\n        div.className = 'relative';\n        span.className = 'colHeader';\n        this.updateCellHeader(span, col, this.instance.getColHeader);\n        div.appendChild(span);\n        TH.appendChild(div);\n      }\n      this.instance.runHooks('afterGetColHeader', col, TH);\n    }\n    /**\n     * Updates header cell content.\n     *\n     * @since 0.15.0-beta4\n     * @param {HTMLElement} element Element to update\n     * @param {Number} index Row index or column index\n     * @param {Function} content Function which should be returns content for this cell\n     */\n  }, {\n    key: \"updateCellHeader\",\n    value: function updateCellHeader(element, index, content) {\n      var renderedIndex = index;\n      var parentOverlay = this.wt.wtOverlays.getParentOverlay(element) || this.wt; // prevent wrong calculations from SampleGenerator\n\n      if (element.parentNode) {\n        if (hasClass(element, 'colHeader')) {\n          renderedIndex = parentOverlay.wtTable.columnFilter.sourceToRendered(index);\n        } else if (hasClass(element, 'rowHeader')) {\n          renderedIndex = parentOverlay.wtTable.rowFilter.sourceToRendered(index);\n        }\n      }\n      if (renderedIndex > -1) {\n        fastInnerHTML(element, content(index));\n      } else {\n        // workaround for https://github.com/handsontable/handsontable/issues/1946\n        fastInnerText(element, String.fromCharCode(160));\n        addClass(element, 'cornerHeader');\n      }\n    }\n    /**\n     * Given a element's left position relative to the viewport, returns maximum element width until the right\n     * edge of the viewport (before scrollbar)\n     *\n     * @private\n     * @param {Number} leftOffset\n     * @return {Number}\n     */\n  }, {\n    key: \"maximumVisibleElementWidth\",\n    value: function maximumVisibleElementWidth(leftOffset) {\n      var workspaceWidth = this.wt.wtViewport.getWorkspaceWidth();\n      var maxWidth = workspaceWidth - leftOffset;\n      return maxWidth > 0 ? maxWidth : 0;\n    }\n    /**\n     * Given a element's top position relative to the viewport, returns maximum element height until the bottom\n     * edge of the viewport (before scrollbar)\n     *\n     * @private\n     * @param {Number} topOffset\n     * @return {Number}\n     */\n  }, {\n    key: \"maximumVisibleElementHeight\",\n    value: function maximumVisibleElementHeight(topOffset) {\n      var workspaceHeight = this.wt.wtViewport.getWorkspaceHeight();\n      var maxHeight = workspaceHeight - topOffset;\n      return maxHeight > 0 ? maxHeight : 0;\n    }\n    /**\n     * Sets new dimensions of the container.\n     */\n  }, {\n    key: \"setLastSize\",\n    value: function setLastSize(width, height) {\n      var priv = privatePool.get(this);\n      var _ref3 = [width, height];\n      priv.lastWidth = _ref3[0];\n      priv.lastHeight = _ref3[1];\n    }\n    /**\n     * Returns cached dimensions.\n     */\n  }, {\n    key: \"getLastSize\",\n    value: function getLastSize() {\n      var priv = privatePool.get(this);\n      return {\n        width: priv.lastWidth,\n        height: priv.lastHeight\n      };\n    }\n    /**\n     * Checks if master overlay is active.\n     *\n     * @private\n     * @returns {Boolean}\n     */\n  }, {\n    key: \"mainViewIsActive\",\n    value: function mainViewIsActive() {\n      return this.wt === this.activeWt;\n    }\n    /**\n     * Destroyes internal WalkOnTable's instance. Detaches all of the bonded listeners.\n     *\n     * @private\n     */\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.wt.destroy();\n      this.eventManager.destroy();\n    }\n  }]);\n  return TableView;\n}();\nexport default TableView;","map":{"version":3,"names":["_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","TypeError","Symbol","iterator","Object","prototype","toString","call","_arr","_n","_d","_e","undefined","_i","_s","next","done","push","value","length","err","Array","isArray","_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","key","_createClass","protoProps","staticProps","addClass","clearTextSelection","empty","fastInnerHTML","fastInnerText","getScrollbarWidth","hasClass","isChildOf","isInput","isOutsideInput","EventManager","stopPropagation","isImmediatePropagationStopped","isRightClick","isLeftClick","Walkontable","handleMouseEvent","privatePool","WeakMap","TableView","eventManager","settings","getSettings","THEAD","TBODY","wt","activeWt","set","selectionMouseDown","mouseDown","table","lastWidth","lastHeight","createElements","registerEvents","initializeWalkontable","render","draw","forceFullRender","renderCall","getCellAtCoords","coords","topmost","td","getCell","scrollViewport","snapToTop","snapToRight","snapToBottom","snapToLeft","scrollViewportHorizontally","column","scrollViewportVertically","row","priv","get","_this$instance","rootElement","rootDocument","originalStyle","getAttribute","setAttribute","createElement","tableClassName","appendChild","container","insertBefore","firstChild","_this","_this$instance2","documentElement","addEventListener","event","isTextSelectionAllowed","rootWindow","preventDefault","focus","fragmentSelection","selection","isInProgress","shiftKey","finish","activeElement","isSelected","unlisten","originalTarget","eventX","x","clientX","eventY","y","clientY","view","holder","wtTable","scrollbarWidth","elementFromPoint","isTargetWebComponent","parentNode","outsideClickDeselects","deselectCell","destroyEditor","_this2","walkontableConfig","debug","externalRowCalculator","getPlugin","isEnabled","preventOverflow","preventWheel","stretchH","data","getDataAtCell","totalRows","countRows","totalColumns","countCols","fixedColumnsLeft","fixedRowsTop","fixedRowsBottom","minSpareRows","renderAllRows","rowHeaders","headerRenderers","hasRowHeaders","TH","appendRowHeader","runHooks","columnHeaders","hasColHeaders","appendColHeader","columnWidth","getColWidth","rowHeight","getRowHeight","cellRenderer","col","TD","cellProperties","getCellMeta","prop","colToProp","getDataAtRowProp","hasHook","getCellRenderer","selections","highlight","hideBorderOnMouseDownOver","onWindowResize","isDestroyed","refreshDimensions","onCellMouseDown","blockCalculations","cell","listen","controller","onCellContextMenu","onCellMouseOut","onCellMouseOver","onCellMouseUp","onCellCornerMouseDown","onCellCornerDblClick","beforeDraw","force","skipRender","beforeRender","onDraw","onScrollVertically","onScrollHorizontally","onBeforeRemoveCellClassNames","onAfterDrawSelection","currentRow","currentColumn","cornersOfSelection","layerLevel","onBeforeDrawBorders","corners","borderClassName","onBeforeTouchScroll","onAfterMomentumScroll","onBeforeStretchingColumnWidth","stretchedWidth","onModifyRowHeaderWidth","rowHeaderWidth","onModifyGetCellCoords","viewportRowCalculatorOverride","calc","viewportOffset","viewportRowRenderingOffset","rows","startRow","Math","max","endRow","min","center","offset","ceil","viewportColumnCalculatorOverride","viewportColumnRenderingOffset","cols","startColumn","endColumn","columnHeaderHeight","spreader","_this$instance$rootEl","getBoundingClientRect","width","height","setLastSize","which","observeDOMVisibility","drawInterrupted","el","isChildOfTableBody","isSelectedOnlyCell","isCellEdited","isMouseDown","_ref","getSelectedLast","_ref2","rowEnd","colEnd","activeEditor","getActiveEditor","isOpened","updateCellHeader","querySelector","getRowHeader","_this$instance3","div","span","className","getColHeader","element","index","content","renderedIndex","parentOverlay","wtOverlays","getParentOverlay","columnFilter","sourceToRendered","rowFilter","String","fromCharCode","maximumVisibleElementWidth","leftOffset","workspaceWidth","wtViewport","getWorkspaceWidth","maxWidth","maximumVisibleElementHeight","topOffset","workspaceHeight","getWorkspaceHeight","maxHeight","_ref3","getLastSize","mainViewIsActive","destroy"],"sources":["C:/Users/mrezy/VSCode/internships-master/node_modules/handsontable/es/tableView.js"],"sourcesContent":["import \"core-js/modules/es.symbol\";\nimport \"core-js/modules/es.symbol.description\";\nimport \"core-js/modules/es.symbol.iterator\";\nimport \"core-js/modules/es.array.iterator\";\nimport \"core-js/modules/es.object.to-string\";\nimport \"core-js/modules/es.regexp.to-string\";\nimport \"core-js/modules/es.string.iterator\";\nimport \"core-js/modules/es.weak-map\";\nimport \"core-js/modules/web.dom-collections.iterator\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport { addClass, clearTextSelection, empty, fastInnerHTML, fastInnerText, getScrollbarWidth, hasClass, isChildOf, isInput, isOutsideInput } from './helpers/dom/element';\nimport EventManager from './eventManager';\nimport { stopPropagation, isImmediatePropagationStopped, isRightClick, isLeftClick } from './helpers/dom/event';\nimport Walkontable from './3rdparty/walkontable/src';\nimport { handleMouseEvent } from './selection/mouseEventHandler';\nvar privatePool = new WeakMap();\n/**\n * @class TableView\n * @private\n */\n\nvar TableView =\n/*#__PURE__*/\nfunction () {\n  /**\n   * @param {Hanstontable} instance Instance of {@link Handsontable}\n   */\n  function TableView(instance) {\n    _classCallCheck(this, TableView);\n\n    /**\n     * Instance of {@link Handsontable}\n     *\n     * @private\n     * @type {Handsontable}\n     */\n    this.instance = instance;\n    /**\n     * Instance of {@link EventManager}\n     *\n     * @private\n     * @type {EventManager}\n     */\n\n    this.eventManager = new EventManager(instance);\n    /**\n     * Current Handsontable's GridSettings object.\n     *\n     * @private\n     * @type {GridSettings}\n     */\n\n    this.settings = instance.getSettings();\n    /**\n     * Main <THEAD> element.\n     *\n     * @type {HTMLTableSectionElement}\n     */\n\n    this.THEAD = void 0;\n    /**\n     * Main <TBODY> element.\n     *\n     * @type {HTMLTableSectionElement}\n     */\n\n    this.TBODY = void 0;\n    /**\n     * Main Walkontable instance.\n     *\n     * @type {Walkontable}\n     */\n\n    this.wt = void 0;\n    /**\n     * Main Walkontable instance.\n     *\n     * @private\n     * @type {Walkontable}\n     */\n\n    this.activeWt = void 0;\n    privatePool.set(this, {\n      /**\n       * Defines if the text should be selected during mousemove.\n       *\n       * @private\n       * @type {Boolean}\n       */\n      selectionMouseDown: false,\n\n      /**\n       * @private\n       * @type {Boolean}\n       */\n      mouseDown: void 0,\n\n      /**\n       * Main <TABLE> element.\n       *\n       * @private\n       * @type {HTMLTableElement}\n       */\n      table: void 0,\n\n      /**\n       * Cached width of the rootElement.\n       *\n       * @type {Number}\n       */\n      lastWidth: 0,\n\n      /**\n       * Cached height of the rootElement.\n       *\n       * @type {Number}\n       */\n      lastHeight: 0\n    });\n    this.createElements();\n    this.registerEvents();\n    this.initializeWalkontable();\n  }\n  /**\n   * Renders WalkontableUI.\n   */\n\n\n  _createClass(TableView, [{\n    key: \"render\",\n    value: function render() {\n      this.wt.draw(!this.instance.forceFullRender);\n      this.instance.forceFullRender = false;\n      this.instance.renderCall = false;\n    }\n    /**\n     * Returns td object given coordinates\n     *\n     * @param {CellCoords} coords\n     * @param {Boolean} topmost\n     * @returns {HTMLTableCellElement|null}\n     */\n\n  }, {\n    key: \"getCellAtCoords\",\n    value: function getCellAtCoords(coords, topmost) {\n      var td = this.wt.getCell(coords, topmost);\n\n      if (td < 0) {\n        // there was an exit code (cell is out of bounds)\n        return null;\n      }\n\n      return td;\n    }\n    /**\n     * Scroll viewport to a cell.\n     *\n     * @param {CellCoords} coords\n     * @param {Boolean} [snapToTop]\n     * @param {Boolean} [snapToRight]\n     * @param {Boolean} [snapToBottom]\n     * @param {Boolean} [snapToLeft]\n     * @returns {Boolean}\n     */\n\n  }, {\n    key: \"scrollViewport\",\n    value: function scrollViewport(coords, snapToTop, snapToRight, snapToBottom, snapToLeft) {\n      return this.wt.scrollViewport(coords, snapToTop, snapToRight, snapToBottom, snapToLeft);\n    }\n    /**\n     * Scroll viewport to a column.\n     *\n     * @param {Number} column Visual column index.\n     * @param {Boolean} [snapToLeft]\n     * @param {Boolean} [snapToRight]\n     * @returns {Boolean}\n     */\n\n  }, {\n    key: \"scrollViewportHorizontally\",\n    value: function scrollViewportHorizontally(column, snapToRight, snapToLeft) {\n      return this.wt.scrollViewportHorizontally(column, snapToRight, snapToLeft);\n    }\n    /**\n     * Scroll viewport to a row.\n     *\n     * @param {Number} row Visual row index.\n     * @param {Boolean} [snapToTop]\n     * @param {Boolean} [snapToBottom]\n     * @returns {Boolean}\n     */\n\n  }, {\n    key: \"scrollViewportVertically\",\n    value: function scrollViewportVertically(row, snapToTop, snapToBottom) {\n      return this.wt.scrollViewportVertically(row, snapToTop, snapToBottom);\n    }\n    /**\n     * Prepares DOMElements and adds correct className to the root element.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"createElements\",\n    value: function createElements() {\n      var priv = privatePool.get(this);\n      var _this$instance = this.instance,\n          rootElement = _this$instance.rootElement,\n          rootDocument = _this$instance.rootDocument;\n      var originalStyle = rootElement.getAttribute('style');\n\n      if (originalStyle) {\n        rootElement.setAttribute('data-originalstyle', originalStyle); // needed to retrieve original style in jsFiddle link generator in HT examples. may be removed in future versions\n      }\n\n      addClass(rootElement, 'handsontable');\n      priv.table = rootDocument.createElement('TABLE');\n      addClass(priv.table, 'htCore');\n\n      if (this.instance.getSettings().tableClassName) {\n        addClass(priv.table, this.instance.getSettings().tableClassName);\n      }\n\n      this.THEAD = rootDocument.createElement('THEAD');\n      priv.table.appendChild(this.THEAD);\n      this.TBODY = rootDocument.createElement('TBODY');\n      priv.table.appendChild(this.TBODY);\n      this.instance.table = priv.table;\n      this.instance.container.insertBefore(priv.table, this.instance.container.firstChild);\n    }\n    /**\n     * Attaches necessary listeners.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"registerEvents\",\n    value: function registerEvents() {\n      var _this = this;\n\n      var priv = privatePool.get(this);\n      var _this$instance2 = this.instance,\n          rootElement = _this$instance2.rootElement,\n          rootDocument = _this$instance2.rootDocument;\n      var documentElement = rootDocument.documentElement;\n      this.eventManager.addEventListener(rootElement, 'mousedown', function (event) {\n        priv.selectionMouseDown = true;\n\n        if (!_this.isTextSelectionAllowed(event.target)) {\n          var rootWindow = _this.instance.rootWindow;\n          clearTextSelection(rootWindow);\n          event.preventDefault();\n          rootWindow.focus(); // make sure that window that contains HOT is active. Important when HOT is in iframe.\n        }\n      });\n      this.eventManager.addEventListener(rootElement, 'mouseup', function () {\n        priv.selectionMouseDown = false;\n      });\n      this.eventManager.addEventListener(rootElement, 'mousemove', function (event) {\n        if (priv.selectionMouseDown && !_this.isTextSelectionAllowed(event.target)) {\n          // Clear selection only when fragmentSelection is enabled, otherwise clearing selection breakes the IME editor.\n          if (_this.settings.fragmentSelection) {\n            clearTextSelection(_this.instance.rootWindow);\n          }\n\n          event.preventDefault();\n        }\n      });\n      this.eventManager.addEventListener(documentElement, 'keyup', function (event) {\n        if (_this.instance.selection.isInProgress() && !event.shiftKey) {\n          _this.instance.selection.finish();\n        }\n      });\n      this.eventManager.addEventListener(documentElement, 'mouseup', function (event) {\n        if (_this.instance.selection.isInProgress() && isLeftClick(event)) {\n          // is left mouse button\n          _this.instance.selection.finish();\n        }\n\n        priv.mouseDown = false;\n\n        if (isOutsideInput(rootDocument.activeElement) || !_this.instance.selection.isSelected() && !isRightClick(event)) {\n          _this.instance.unlisten();\n        }\n      });\n      this.eventManager.addEventListener(documentElement, 'contextmenu', function (event) {\n        if (_this.instance.selection.isInProgress() && isRightClick(event)) {\n          _this.instance.selection.finish();\n\n          priv.mouseDown = false;\n        }\n      });\n      this.eventManager.addEventListener(documentElement, 'touchend', function () {\n        if (_this.instance.selection.isInProgress()) {\n          _this.instance.selection.finish();\n        }\n\n        priv.mouseDown = false;\n      });\n      this.eventManager.addEventListener(documentElement, 'mousedown', function (event) {\n        var originalTarget = event.target;\n        var eventX = event.x || event.clientX;\n        var eventY = event.y || event.clientY;\n        var next = event.target;\n\n        if (priv.mouseDown || !rootElement || !_this.instance.view) {\n          return; // it must have been started in a cell\n        } // immediate click on \"holder\" means click on the right side of vertical scrollbar\n\n\n        var holder = _this.instance.view.wt.wtTable.holder;\n\n        if (next === holder) {\n          var scrollbarWidth = getScrollbarWidth(rootDocument);\n\n          if (rootDocument.elementFromPoint(eventX + scrollbarWidth, eventY) !== holder || rootDocument.elementFromPoint(eventX, eventY + scrollbarWidth) !== holder) {\n            return;\n          }\n        } else {\n          while (next !== documentElement) {\n            if (next === null) {\n              if (event.isTargetWebComponent) {\n                break;\n              } // click on something that was a row but now is detached (possibly because your click triggered a rerender)\n\n\n              return;\n            }\n\n            if (next === rootElement) {\n              // click inside container\n              return;\n            }\n\n            next = next.parentNode;\n          }\n        } // function did not return until here, we have an outside click!\n\n\n        var outsideClickDeselects = typeof _this.settings.outsideClickDeselects === 'function' ? _this.settings.outsideClickDeselects(originalTarget) : _this.settings.outsideClickDeselects;\n\n        if (outsideClickDeselects) {\n          _this.instance.deselectCell();\n        } else {\n          _this.instance.destroyEditor(false, false);\n        }\n      });\n      this.eventManager.addEventListener(priv.table, 'selectstart', function (event) {\n        if (_this.settings.fragmentSelection || isInput(event.target)) {\n          return;\n        } // https://github.com/handsontable/handsontable/issues/160\n        // Prevent text from being selected when performing drag down.\n\n\n        event.preventDefault();\n      });\n    }\n    /**\n     * Defines default configuration and initializes WalkOnTable intance.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"initializeWalkontable\",\n    value: function initializeWalkontable() {\n      var _this2 = this;\n\n      var priv = privatePool.get(this);\n      var walkontableConfig = {\n        debug: function debug() {\n          return _this2.settings.debug;\n        },\n        externalRowCalculator: this.instance.getPlugin('autoRowSize') && this.instance.getPlugin('autoRowSize').isEnabled(),\n        table: priv.table,\n        preventOverflow: function preventOverflow() {\n          return _this2.settings.preventOverflow;\n        },\n        preventWheel: function preventWheel() {\n          return _this2.settings.preventWheel;\n        },\n        stretchH: function stretchH() {\n          return _this2.settings.stretchH;\n        },\n        data: this.instance.getDataAtCell,\n        totalRows: function totalRows() {\n          return _this2.instance.countRows();\n        },\n        totalColumns: function totalColumns() {\n          return _this2.instance.countCols();\n        },\n        fixedColumnsLeft: function fixedColumnsLeft() {\n          return _this2.settings.fixedColumnsLeft;\n        },\n        fixedRowsTop: function fixedRowsTop() {\n          return _this2.settings.fixedRowsTop;\n        },\n        fixedRowsBottom: function fixedRowsBottom() {\n          return _this2.settings.fixedRowsBottom;\n        },\n        minSpareRows: function minSpareRows() {\n          return _this2.settings.minSpareRows;\n        },\n        renderAllRows: this.settings.renderAllRows,\n        rowHeaders: function rowHeaders() {\n          var headerRenderers = [];\n\n          if (_this2.instance.hasRowHeaders()) {\n            headerRenderers.push(function (row, TH) {\n              return _this2.appendRowHeader(row, TH);\n            });\n          }\n\n          _this2.instance.runHooks('afterGetRowHeaderRenderers', headerRenderers);\n\n          return headerRenderers;\n        },\n        columnHeaders: function columnHeaders() {\n          var headerRenderers = [];\n\n          if (_this2.instance.hasColHeaders()) {\n            headerRenderers.push(function (column, TH) {\n              _this2.appendColHeader(column, TH);\n            });\n          }\n\n          _this2.instance.runHooks('afterGetColumnHeaderRenderers', headerRenderers);\n\n          return headerRenderers;\n        },\n        columnWidth: this.instance.getColWidth,\n        rowHeight: this.instance.getRowHeight,\n        cellRenderer: function cellRenderer(row, col, TD) {\n          var cellProperties = _this2.instance.getCellMeta(row, col);\n\n          var prop = _this2.instance.colToProp(col);\n\n          var value = _this2.instance.getDataAtRowProp(row, prop);\n\n          if (_this2.instance.hasHook('beforeValueRender')) {\n            value = _this2.instance.runHooks('beforeValueRender', value, cellProperties);\n          }\n\n          _this2.instance.runHooks('beforeRenderer', TD, row, col, prop, value, cellProperties);\n\n          _this2.instance.getCellRenderer(cellProperties)(_this2.instance, TD, row, col, prop, value, cellProperties);\n\n          _this2.instance.runHooks('afterRenderer', TD, row, col, prop, value, cellProperties);\n        },\n        selections: this.instance.selection.highlight,\n        hideBorderOnMouseDownOver: function hideBorderOnMouseDownOver() {\n          return _this2.settings.fragmentSelection;\n        },\n        onWindowResize: function onWindowResize() {\n          if (!_this2.instance || _this2.instance.isDestroyed) {\n            return;\n          }\n\n          _this2.instance.refreshDimensions();\n        },\n        onCellMouseDown: function onCellMouseDown(event, coords, TD, wt) {\n          var blockCalculations = {\n            row: false,\n            column: false,\n            cell: false\n          };\n\n          _this2.instance.listen();\n\n          _this2.activeWt = wt;\n          priv.mouseDown = true;\n\n          _this2.instance.runHooks('beforeOnCellMouseDown', event, coords, TD, blockCalculations);\n\n          if (isImmediatePropagationStopped(event)) {\n            return;\n          }\n\n          handleMouseEvent(event, {\n            coords: coords,\n            selection: _this2.instance.selection,\n            controller: blockCalculations\n          });\n\n          _this2.instance.runHooks('afterOnCellMouseDown', event, coords, TD);\n\n          _this2.activeWt = _this2.wt;\n        },\n        onCellContextMenu: function onCellContextMenu(event, coords, TD, wt) {\n          _this2.activeWt = wt;\n          priv.mouseDown = false;\n\n          if (_this2.instance.selection.isInProgress()) {\n            _this2.instance.selection.finish();\n          }\n\n          _this2.instance.runHooks('beforeOnCellContextMenu', event, coords, TD);\n\n          if (isImmediatePropagationStopped(event)) {\n            return;\n          }\n\n          _this2.instance.runHooks('afterOnCellContextMenu', event, coords, TD);\n\n          _this2.activeWt = _this2.wt;\n        },\n        onCellMouseOut: function onCellMouseOut(event, coords, TD, wt) {\n          _this2.activeWt = wt;\n\n          _this2.instance.runHooks('beforeOnCellMouseOut', event, coords, TD);\n\n          if (isImmediatePropagationStopped(event)) {\n            return;\n          }\n\n          _this2.instance.runHooks('afterOnCellMouseOut', event, coords, TD);\n\n          _this2.activeWt = _this2.wt;\n        },\n        onCellMouseOver: function onCellMouseOver(event, coords, TD, wt) {\n          var blockCalculations = {\n            row: false,\n            column: false,\n            cell: false\n          };\n          _this2.activeWt = wt;\n\n          _this2.instance.runHooks('beforeOnCellMouseOver', event, coords, TD, blockCalculations);\n\n          if (isImmediatePropagationStopped(event)) {\n            return;\n          }\n\n          if (priv.mouseDown) {\n            handleMouseEvent(event, {\n              coords: coords,\n              selection: _this2.instance.selection,\n              controller: blockCalculations\n            });\n          }\n\n          _this2.instance.runHooks('afterOnCellMouseOver', event, coords, TD);\n\n          _this2.activeWt = _this2.wt;\n        },\n        onCellMouseUp: function onCellMouseUp(event, coords, TD, wt) {\n          _this2.activeWt = wt;\n\n          _this2.instance.runHooks('beforeOnCellMouseUp', event, coords, TD);\n\n          if (isImmediatePropagationStopped(event)) {\n            return;\n          }\n\n          _this2.instance.runHooks('afterOnCellMouseUp', event, coords, TD);\n\n          _this2.activeWt = _this2.wt;\n        },\n        onCellCornerMouseDown: function onCellCornerMouseDown(event) {\n          event.preventDefault();\n\n          _this2.instance.runHooks('afterOnCellCornerMouseDown', event);\n        },\n        onCellCornerDblClick: function onCellCornerDblClick(event) {\n          event.preventDefault();\n\n          _this2.instance.runHooks('afterOnCellCornerDblClick', event);\n        },\n        beforeDraw: function beforeDraw(force, skipRender) {\n          return _this2.beforeRender(force, skipRender);\n        },\n        onDraw: function onDraw(force) {\n          return _this2.onDraw(force);\n        },\n        onScrollVertically: function onScrollVertically() {\n          return _this2.instance.runHooks('afterScrollVertically');\n        },\n        onScrollHorizontally: function onScrollHorizontally() {\n          return _this2.instance.runHooks('afterScrollHorizontally');\n        },\n        onBeforeRemoveCellClassNames: function onBeforeRemoveCellClassNames() {\n          return _this2.instance.runHooks('beforeRemoveCellClassNames');\n        },\n        onAfterDrawSelection: function onAfterDrawSelection(currentRow, currentColumn, cornersOfSelection, layerLevel) {\n          return _this2.instance.runHooks('afterDrawSelection', currentRow, currentColumn, cornersOfSelection, layerLevel);\n        },\n        onBeforeDrawBorders: function onBeforeDrawBorders(corners, borderClassName) {\n          return _this2.instance.runHooks('beforeDrawBorders', corners, borderClassName);\n        },\n        onBeforeTouchScroll: function onBeforeTouchScroll() {\n          return _this2.instance.runHooks('beforeTouchScroll');\n        },\n        onAfterMomentumScroll: function onAfterMomentumScroll() {\n          return _this2.instance.runHooks('afterMomentumScroll');\n        },\n        onBeforeStretchingColumnWidth: function onBeforeStretchingColumnWidth(stretchedWidth, column) {\n          return _this2.instance.runHooks('beforeStretchingColumnWidth', stretchedWidth, column);\n        },\n        onModifyRowHeaderWidth: function onModifyRowHeaderWidth(rowHeaderWidth) {\n          return _this2.instance.runHooks('modifyRowHeaderWidth', rowHeaderWidth);\n        },\n        onModifyGetCellCoords: function onModifyGetCellCoords(row, column, topmost) {\n          return _this2.instance.runHooks('modifyGetCellCoords', row, column, topmost);\n        },\n        viewportRowCalculatorOverride: function viewportRowCalculatorOverride(calc) {\n          var viewportOffset = _this2.settings.viewportRowRenderingOffset;\n\n          if (viewportOffset === 'auto' && _this2.settings.fixedRowsTop) {\n            viewportOffset = 10;\n          }\n\n          if (viewportOffset > 0 || viewportOffset === 'auto') {\n            var rows = _this2.instance.countRows();\n\n            if (typeof viewportOffset === 'number') {\n              calc.startRow = Math.max(calc.startRow - viewportOffset, 0);\n              calc.endRow = Math.min(calc.endRow + viewportOffset, rows - 1);\n            } else if (viewportOffset === 'auto') {\n              var center = calc.startRow + calc.endRow - calc.startRow;\n              var offset = Math.ceil(center / rows * 12);\n              calc.startRow = Math.max(calc.startRow - offset, 0);\n              calc.endRow = Math.min(calc.endRow + offset, rows - 1);\n            }\n          }\n\n          _this2.instance.runHooks('afterViewportRowCalculatorOverride', calc);\n        },\n        viewportColumnCalculatorOverride: function viewportColumnCalculatorOverride(calc) {\n          var viewportOffset = _this2.settings.viewportColumnRenderingOffset;\n\n          if (viewportOffset === 'auto' && _this2.settings.fixedColumnsLeft) {\n            viewportOffset = 10;\n          }\n\n          if (viewportOffset > 0 || viewportOffset === 'auto') {\n            var cols = _this2.instance.countCols();\n\n            if (typeof viewportOffset === 'number') {\n              calc.startColumn = Math.max(calc.startColumn - viewportOffset, 0);\n              calc.endColumn = Math.min(calc.endColumn + viewportOffset, cols - 1);\n            }\n\n            if (viewportOffset === 'auto') {\n              var center = calc.startColumn + calc.endColumn - calc.startColumn;\n              var offset = Math.ceil(center / cols * 12);\n              calc.startRow = Math.max(calc.startColumn - offset, 0);\n              calc.endColumn = Math.min(calc.endColumn + offset, cols - 1);\n            }\n          }\n\n          _this2.instance.runHooks('afterViewportColumnCalculatorOverride', calc);\n        },\n        rowHeaderWidth: function rowHeaderWidth() {\n          return _this2.settings.rowHeaderWidth;\n        },\n        columnHeaderHeight: function columnHeaderHeight() {\n          var columnHeaderHeight = _this2.instance.runHooks('modifyColumnHeaderHeight');\n\n          return _this2.settings.columnHeaderHeight || columnHeaderHeight;\n        }\n      };\n      this.instance.runHooks('beforeInitWalkontable', walkontableConfig);\n      this.wt = new Walkontable(walkontableConfig);\n      this.activeWt = this.wt;\n      var spreader = this.wt.wtTable.spreader; // We have to cache width and height after Walkontable initialization.\n\n      var _this$instance$rootEl = this.instance.rootElement.getBoundingClientRect(),\n          width = _this$instance$rootEl.width,\n          height = _this$instance$rootEl.height;\n\n      this.setLastSize(width, height);\n      this.eventManager.addEventListener(spreader, 'mousedown', function (event) {\n        // right mouse button exactly on spreader means right click on the right hand side of vertical scrollbar\n        if (event.target === spreader && event.which === 3) {\n          stopPropagation(event);\n        }\n      });\n      this.eventManager.addEventListener(spreader, 'contextmenu', function (event) {\n        // right mouse button exactly on spreader means right click on the right hand side of vertical scrollbar\n        if (event.target === spreader && event.which === 3) {\n          stopPropagation(event);\n        }\n      });\n      this.eventManager.addEventListener(this.instance.rootDocument.documentElement, 'click', function () {\n        if (_this2.settings.observeDOMVisibility) {\n          if (_this2.wt.drawInterrupted) {\n            _this2.instance.forceFullRender = true;\n\n            _this2.render();\n          }\n        }\n      });\n    }\n    /**\n     * Checks if it's possible to create text selection in element.\n     *\n     * @private\n     * @param {HTMLElement} el\n     * @returns {Boolean}\n     */\n\n  }, {\n    key: \"isTextSelectionAllowed\",\n    value: function isTextSelectionAllowed(el) {\n      if (isInput(el)) {\n        return true;\n      }\n\n      var isChildOfTableBody = isChildOf(el, this.instance.view.wt.wtTable.spreader);\n\n      if (this.settings.fragmentSelection === true && isChildOfTableBody) {\n        return true;\n      }\n\n      if (this.settings.fragmentSelection === 'cell' && this.isSelectedOnlyCell() && isChildOfTableBody) {\n        return true;\n      }\n\n      if (!this.settings.fragmentSelection && this.isCellEdited() && this.isSelectedOnlyCell()) {\n        return true;\n      }\n\n      return false;\n    }\n    /**\n     * Checks if user's been called mousedown.\n     *\n     * @private\n     * @returns {Boolean}\n     */\n\n  }, {\n    key: \"isMouseDown\",\n    value: function isMouseDown() {\n      return privatePool.get(this).mouseDown;\n    }\n    /**\n     * Check if selected only one cell.\n     *\n     * @private\n     * @returns {Boolean}\n     */\n\n  }, {\n    key: \"isSelectedOnlyCell\",\n    value: function isSelectedOnlyCell() {\n      var _ref = this.instance.getSelectedLast() || [],\n          _ref2 = _slicedToArray(_ref, 4),\n          row = _ref2[0],\n          col = _ref2[1],\n          rowEnd = _ref2[2],\n          colEnd = _ref2[3];\n\n      return row !== void 0 && row === rowEnd && col === colEnd;\n    }\n    /**\n     * Checks if active cell is editing.\n     *\n     * @private\n     * @returns {Boolean}\n     */\n\n  }, {\n    key: \"isCellEdited\",\n    value: function isCellEdited() {\n      var activeEditor = this.instance.getActiveEditor();\n      return activeEditor && activeEditor.isOpened();\n    }\n    /**\n     * `beforeDraw` callback.\n     *\n     * @private\n     * @param {Boolean} force\n     * @param {Boolean} skipRender\n     */\n\n  }, {\n    key: \"beforeRender\",\n    value: function beforeRender(force, skipRender) {\n      if (force) {\n        // this.instance.forceFullRender = did Handsontable request full render?\n        this.instance.runHooks('beforeRender', this.instance.forceFullRender, skipRender);\n      }\n    }\n    /**\n     * `onDraw` callback.\n     *\n     * @private\n     * @param {Boolean} force\n     */\n\n  }, {\n    key: \"onDraw\",\n    value: function onDraw(force) {\n      if (force) {\n        // this.instance.forceFullRender = did Handsontable request full render?\n        this.instance.runHooks('afterRender', this.instance.forceFullRender);\n      }\n    }\n    /**\n     * Append row header to a TH element\n     *\n     * @private\n     * @param row\n     * @param TH\n     */\n\n  }, {\n    key: \"appendRowHeader\",\n    value: function appendRowHeader(row, TH) {\n      if (TH.firstChild) {\n        var container = TH.firstChild;\n\n        if (!hasClass(container, 'relative')) {\n          empty(TH);\n          this.appendRowHeader(row, TH);\n          return;\n        }\n\n        this.updateCellHeader(container.querySelector('.rowHeader'), row, this.instance.getRowHeader);\n      } else {\n        var _this$instance3 = this.instance,\n            rootDocument = _this$instance3.rootDocument,\n            getRowHeader = _this$instance3.getRowHeader;\n        var div = rootDocument.createElement('div');\n        var span = rootDocument.createElement('span');\n        div.className = 'relative';\n        span.className = 'rowHeader';\n        this.updateCellHeader(span, row, getRowHeader);\n        div.appendChild(span);\n        TH.appendChild(div);\n      }\n\n      this.instance.runHooks('afterGetRowHeader', row, TH);\n    }\n    /**\n     * Append column header to a TH element\n     *\n     * @private\n     * @param col\n     * @param TH\n     */\n\n  }, {\n    key: \"appendColHeader\",\n    value: function appendColHeader(col, TH) {\n      if (TH.firstChild) {\n        var container = TH.firstChild;\n\n        if (hasClass(container, 'relative')) {\n          this.updateCellHeader(container.querySelector('.colHeader'), col, this.instance.getColHeader);\n        } else {\n          empty(TH);\n          this.appendColHeader(col, TH);\n        }\n      } else {\n        var rootDocument = this.instance.rootDocument;\n        var div = rootDocument.createElement('div');\n        var span = rootDocument.createElement('span');\n        div.className = 'relative';\n        span.className = 'colHeader';\n        this.updateCellHeader(span, col, this.instance.getColHeader);\n        div.appendChild(span);\n        TH.appendChild(div);\n      }\n\n      this.instance.runHooks('afterGetColHeader', col, TH);\n    }\n    /**\n     * Updates header cell content.\n     *\n     * @since 0.15.0-beta4\n     * @param {HTMLElement} element Element to update\n     * @param {Number} index Row index or column index\n     * @param {Function} content Function which should be returns content for this cell\n     */\n\n  }, {\n    key: \"updateCellHeader\",\n    value: function updateCellHeader(element, index, content) {\n      var renderedIndex = index;\n      var parentOverlay = this.wt.wtOverlays.getParentOverlay(element) || this.wt; // prevent wrong calculations from SampleGenerator\n\n      if (element.parentNode) {\n        if (hasClass(element, 'colHeader')) {\n          renderedIndex = parentOverlay.wtTable.columnFilter.sourceToRendered(index);\n        } else if (hasClass(element, 'rowHeader')) {\n          renderedIndex = parentOverlay.wtTable.rowFilter.sourceToRendered(index);\n        }\n      }\n\n      if (renderedIndex > -1) {\n        fastInnerHTML(element, content(index));\n      } else {\n        // workaround for https://github.com/handsontable/handsontable/issues/1946\n        fastInnerText(element, String.fromCharCode(160));\n        addClass(element, 'cornerHeader');\n      }\n    }\n    /**\n     * Given a element's left position relative to the viewport, returns maximum element width until the right\n     * edge of the viewport (before scrollbar)\n     *\n     * @private\n     * @param {Number} leftOffset\n     * @return {Number}\n     */\n\n  }, {\n    key: \"maximumVisibleElementWidth\",\n    value: function maximumVisibleElementWidth(leftOffset) {\n      var workspaceWidth = this.wt.wtViewport.getWorkspaceWidth();\n      var maxWidth = workspaceWidth - leftOffset;\n      return maxWidth > 0 ? maxWidth : 0;\n    }\n    /**\n     * Given a element's top position relative to the viewport, returns maximum element height until the bottom\n     * edge of the viewport (before scrollbar)\n     *\n     * @private\n     * @param {Number} topOffset\n     * @return {Number}\n     */\n\n  }, {\n    key: \"maximumVisibleElementHeight\",\n    value: function maximumVisibleElementHeight(topOffset) {\n      var workspaceHeight = this.wt.wtViewport.getWorkspaceHeight();\n      var maxHeight = workspaceHeight - topOffset;\n      return maxHeight > 0 ? maxHeight : 0;\n    }\n    /**\n     * Sets new dimensions of the container.\n     */\n\n  }, {\n    key: \"setLastSize\",\n    value: function setLastSize(width, height) {\n      var priv = privatePool.get(this);\n      var _ref3 = [width, height];\n      priv.lastWidth = _ref3[0];\n      priv.lastHeight = _ref3[1];\n    }\n    /**\n     * Returns cached dimensions.\n     */\n\n  }, {\n    key: \"getLastSize\",\n    value: function getLastSize() {\n      var priv = privatePool.get(this);\n      return {\n        width: priv.lastWidth,\n        height: priv.lastHeight\n      };\n    }\n    /**\n     * Checks if master overlay is active.\n     *\n     * @private\n     * @returns {Boolean}\n     */\n\n  }, {\n    key: \"mainViewIsActive\",\n    value: function mainViewIsActive() {\n      return this.wt === this.activeWt;\n    }\n    /**\n     * Destroyes internal WalkOnTable's instance. Detaches all of the bonded listeners.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.wt.destroy();\n      this.eventManager.destroy();\n    }\n  }]);\n\n  return TableView;\n}();\n\nexport default TableView;"],"mappings":"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"},"metadata":{},"sourceType":"module"}